var requirejs,require,define;(function(t){function e(t,e){return g.call(t,e)}function n(t,e){var n,r,o,i,s,u,a,c,p,f,l=e&&e.split("/"),d=h.map,_=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(l=l.slice(0,l.length-1),t=l.concat(t.split("/")),c=0;t.length>c;c+=1)if(f=t[c],"."===f)t.splice(c,1),c-=1;else if(".."===f){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((l||_)&&d){for(n=t.split("/"),c=n.length;c>0;c-=1){if(r=n.slice(0,c).join("/"),l)for(p=l.length;p>0;p-=1)if(o=d[l.slice(0,p).join("/")],o&&(o=o[r])){i=o,s=c;break}if(i)break;!u&&_&&_[r]&&(u=_[r],a=c)}!i&&u&&(i=u,s=a),i&&(n.splice(0,s,i),t=n.join("/"))}return t}function r(e,n){return function(){return p.apply(t,x.call(arguments,0).concat([e,n]))}}function o(t){return function(e){return n(e,t)}}function i(t){return function(e){d[t]=e}}function s(n){if(e(_,n)){var r=_[n];delete _[n],y[n]=!0,c.apply(t,r)}if(!e(d,n)&&!e(y,n))throw Error("No "+n);return d[n]}function u(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function a(t){return function(){return h&&h.config&&h.config[t]||{}}}var c,p,f,l,d={},_={},h={},y={},g=Object.prototype.hasOwnProperty,x=[].slice;f=function(t,e){var r,i=u(t),a=i[0];return t=i[1],a&&(a=n(a,e),r=s(a)),a?t=r&&r.normalize?r.normalize(t,o(e)):n(t,e):(t=n(t,e),i=u(t),a=i[0],t=i[1],a&&(r=s(a))),{f:a?a+"!"+t:t,n:t,pr:a,p:r}},l={require:function(t){return r(t)},exports:function(t){var e=d[t];return e!==void 0?e:d[t]={}},module:function(t){return{id:t,uri:"",exports:d[t],config:a(t)}}},c=function(n,o,u,a){var c,p,h,g,x,v,m=[];if(a=a||n,"function"==typeof u){for(o=!o.length&&u.length?["require","exports","module"]:o,x=0;o.length>x;x+=1)if(g=f(o[x],a),p=g.f,"require"===p)m[x]=l.require(n);else if("exports"===p)m[x]=l.exports(n),v=!0;else if("module"===p)c=m[x]=l.module(n);else if(e(d,p)||e(_,p)||e(y,p))m[x]=s(p);else{if(!g.p)throw Error(n+" missing "+p);g.p.load(g.n,r(a,!0),i(p),{}),m[x]=d[p]}h=u.apply(d[n],m),n&&(c&&c.exports!==t&&c.exports!==d[n]?d[n]=c.exports:h===t&&v||(d[n]=h))}else n&&(d[n]=u)},requirejs=require=p=function(e,n,r,o,i){return"string"==typeof e?l[e]?l[e](n):s(f(e,n).f):(e.splice||(h=e,n.splice?(e=n,n=r,r=null):e=t),n=n||function(){},"function"==typeof r&&(r=o,o=i),o?c(t,e,n,r):setTimeout(function(){c(t,e,n,r)},4),p)},p.config=function(t){return h=t,h.deps&&p(h.deps,h.callback),p},define=function(t,n,r){n.splice||(r=n,n=[]),e(d,t)||e(_,t)||(_[t]=[t,n,r])},define.amd={jQuery:!0}})(),define("../components/almond/almond",function(){});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exception",[],function(){var t;return t=function(t){function e(t,e,n,r){this.message=t,this.code=e,this.details=n,this.data=r}return __extends(e,t),e}(Error)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/data_object_invalid_json",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/duplicated_distinct_ids",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/internal_service_error",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/invalid_token",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/missing_parameter",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/person_not_found",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/properties_object_invalid",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/route_not_found",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/timeout",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)}),define("exceptions/unknown",["exception"],function(){var t;return t=function(){function t(t,e,n,r){this.message=t,this.code=e,this.details=n,this.data=r}return t}()}),define("exceptions",["exception","exceptions/data_object_invalid_json","exceptions/duplicated_distinct_ids","exceptions/internal_service_error","exceptions/invalid_token","exceptions/missing_parameter","exceptions/person_not_found","exceptions/properties_object_invalid","exceptions/route_not_found","exceptions/timeout","exceptions/unknown"],function(t,e,n,r,o,i,s,u,a,c,p){return{Exception:t,DataObjectInvalidJson:e,DuplicatedDistinctIds:n,InternalServiceError:r,InvalidToken:o,MissingParameter:i,PersonNotFound:s,PropertiesObjectInvalid:u,RouteNotFound:a,Timeout:c,Unknown:p}}),"object"!=typeof JSON&&(JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,o,i,s,u=gap,a=e[t];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(t)),"function"==typeof rep&&(a=rep.call(e,t,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?a+"":"null";case"boolean":case"null":return a+"";case"object":if(!a)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(a)){for(i=a.length,n=0;i>n;n+=1)s[n]=str(n,a)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+u+"]":"["+s.join(",")+"]",gap=u,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,a),o&&s.push(quote(r)+(gap?": ":":")+o));else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(o=str(r,a),o&&s.push(quote(r)+(gap?": ":":")+o));return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+u+"}":"{"+s.join(",")+"}",gap=u,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(t,e,o)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json2",function(t){return function(){var e;return e||t.JSON}}(this)),define("jsonp",["exceptions","json2"],function(t,e){var n;return n=function(){function n(){}return n.prototype.count=0,n.prototype.call=function(t,e){return this.jsonp(this.url(t,e))},n.prototype.url=function(t,e){return trak.io.protocol()+trak.io.host()+"/"+t+this.params(t,e)},n.prototype.params=function(t,n){var r,o,i,s;i=this.default_params(t),_.merge(i,n,function(t,e){return _.isArray(t)?_.uniq(t.concat(e)):void 0}),r=[];for(o in i)s=i[o],(_.isArray(s)||_.isObject(s))&&(s=e.stringify(s)),r.push(o+"="+encodeURIComponent(s));return"?"+r.join("&")},n.prototype.default_params=function(t){switch(t){case"identify":return{token:trak.io.api_token(),data:{distinct_id:trak.io.distinct_id(),time:new Date,properties:{}}};case"alias":return{token:trak.io.api_token(),data:{distinct_id:trak.io.distinct_id(),time:new Date}};case"track":return{token:trak.io.api_token(),data:{distinct_id:trak.io.distinct_id(),time:new Date,properties:{},medium:trak.io.medium(),context:trak.io.context()}};default:return{}}},n.prototype.callback=function(e){var n;if(!e||!e.status||"success"!==e.status)throw e.exception&&(n=t[e.exception.match(/\:\:([a-zA-Z0-9]+)$/)[1]])?new n(e.message,e.code,e.details,e):new t.Unknown(e.message,e.code,e.details,e)},n.prototype.noop=function(){},n.prototype.jsonp=function(t){var e,n,r,o,i,s,u;return s=1e4,i=document.getElementsByTagName("script")[0],n=this.count++,r=this,s&&(u=setTimeout(function(){return e(),r.callback({status:"error",exception:"TrakioAPI::Exceptions::Timeout",message:"The server failed to respond in time."})},s)),e=function(){return o.parentNode.removeChild(o),window["__trak"+n]=this.noop},r=this,window["__trak"+n]=function(t){return u&&clearTimeout(u),e(),r.callback(t)},t+=(~t.indexOf("?")?"&":"?")+"callback="+encodeURIComponent("__trak"+n),t=t.replace("?&","?"),o=document.createElement("script"),o.src=t,i.parentNode.insertBefore(o,i)},n}()}),function(t){function e(){}function n(){for(var t,n={shadowedProps:P,arrays:"isArray(iterable)",bottom:"",init:"iterable",loop:"",top:"",useHas:!0,useKeys:!!te},r=0;t=arguments[r];r++)for(var o in t)n[o]=t[o];var u=n.args;n.firstArg=/^[^,]+/.exec(u)[0];var a=Function("hasOwnProperty, isArguments, isArray, isString, keys, lodash, objectTypes","return function("+u+") {\n"+Z(n)+"\n}");return a(H,i,s,f,te,e,U)}function r(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function o(t){var e=!1;if(!t||B.call(t)!=q||!Q.argsClass&&i(t))return e;var n=t.constructor;return(c(n)?n instanceof n:Q.nodeClass||!r(t))?Q.ownLast?(ne(t,function(t,n,r){return e=H.call(r,n),!1}),e===!0):(ne(t,function(t,n){e=n}),e===!1||H.call(t,e)):e}function i(t){return B.call(t)==S}function s(t){return Q.argsObject&&t instanceof Array||($?$(t):B.call(t)==A)}function u(t){return t===!0||t===!1||B.call(t)==C}function a(t,n,o,s,u,p){var f=o===w;if("function"==typeof o&&!f){o=e.createCallback(o,s,2);var l=o(t,n);if(l!==undefined)return!!l}if(t===n)return 0!==t||1/t==1/n;var d=typeof t,_=typeof n;if(t===t&&(!t||"function"!=d&&"object"!=d)&&(!n||"function"!=_&&"object"!=_))return!1;if(null==t||null==n)return t===n;var h=B.call(t),y=B.call(n);if(h==S&&(h=q),y==S&&(y=q),h!=y)return!1;switch(h){case C:case N:return+t==+n;case E:return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case I:case J:return t==n+""}var g=h==A;if(!g){if(H.call(t,"__wrapped__ ")||H.call(n,"__wrapped__"))return a(t.__wrapped__||t,n.__wrapped__||n,o,s,u,p);if(h!=q||!Q.nodeClass&&(r(t)||r(n)))return!1;var x=!Q.argsObject&&i(t)?Object:t.constructor,v=!Q.argsObject&&i(n)?Object:n.constructor;if(x!=v&&!(c(x)&&x instanceof x&&c(v)&&v instanceof v))return!1}u||(u=[]),p||(p=[]);for(var m=u.length;m--;)if(u[m]==t)return p[m]==n;var b=0;if(l=!0,u.push(t),p.push(n),g){if(m=t.length,b=n.length,l=b==t.length,!l&&!f)return l;for(;b--;){var k=m,j=n[b];if(f)for(;k--&&!(l=a(t[k],j,o,s,u,p)););else if(!(l=a(t[b],j,o,s,u,p)))break}return l}return ne(n,function(e,n,r){return H.call(r,n)?(b++,l=H.call(t,n)&&a(t[n],e,o,s,u,p)):undefined}),l&&!f&&ne(t,function(t,e,n){return H.call(n,e)?l=--b>-1:undefined}),l}function c(t){return"function"==typeof t}function p(t){return t?U[typeof t]:!1}function f(t){return"string"==typeof t||B.call(t)==J}function l(t){return t===undefined}function d(t,n,r){var o=arguments,i=0,u=2;if(!p(t))return t;if(r===w)var a=o[3],c=o[4],f=o[5];else c=[],f=[],"number"!=typeof r&&(u=o.length),u>3&&"function"==typeof o[u-2]?a=e.createCallback(o[--u-1],o[u--],2):u>2&&"function"==typeof o[u-1]&&(a=o[--u]);for(;u>++i;)(s(o[i])?_:re)(o[i],function(e,n){var r,o,i=e,u=t[n];if(e&&((o=s(e))||oe(e))){for(var p=c.length;p--;)if(r=c[p]==e){u=f[p];break}if(!r){var l;a&&(i=a(u,e),(l=i!==undefined)&&(u=i)),l||(u=o?s(u)?u:[]:oe(u)?u:{}),c.push(e),f.push(u),l||(u=d(u,e,w,a,c,f))}}else a&&(i=a(u,e),i===undefined&&(i=e)),i!==undefined&&(u=i);t[n]=u});return t}function _(t,e,n){if(e&&n===undefined&&s(t))for(var r=-1,o=t.length;o>++r&&e(t[r],r,t)!==!1;);else ee(t,e,n);return t}function h(t,e,n){var r=-1,o=t?t.length:0;if("number"==typeof n)r=(0>n?L(0,o+n):n||0)-1;else if(n)return r=y(t,e),t[r]===e?r:-1;for(;o>++r;)if(t[r]===e)return r;return-1}function y(t,n,r,o){var i=0,s=t?t.length:i;for(r=r?e.createCallback(r,o,1):v,n=r(n);s>i;){var u=i+s>>>1;n>r(t[u])?i=u+1:s=u}return i}function g(t,n,r,o){var i=-1,s=t?t.length:0,u=[],a=u;"boolean"!=typeof n&&null!=n&&(o=r,r=n,n=!1);var c=!n&&s>=O;if(c)var p={};for(null!=r&&(a=[],r=e.createCallback(r,o));s>++i;){var f=t[i],l=r?r(f,i,t):f;if(c)var d=j+l,_=p[d]?!(a=p[d]):a=p[d]=[];(n?!i||a[a.length-1]!==l:_||0>h(a,l))&&((r||c)&&a.push(l),u.push(f))}return u}function x(t,e,n){if(null==t)return v;var r=typeof t;if("function"!=r){if("object"!=r)return function(e){return e[t]};var o=te(t);return function(e){for(var n=o.length,r=!1;n--&&(r=a(e[o[n]],t[o[n]],w)););return r}}return e!==undefined?1===n?function(n){return t.call(e,n)}:2===n?function(n,r){return t.call(e,n,r)}:4===n?function(n,r,o,i){return t.call(e,n,r,o,i)}:function(n,r,o){return t.call(e,n,r,o)}:t}function v(t){return t}var m="object"==typeof exports&&exports,b="object"==typeof module&&module&&module.exports==m&&module,k="object"==typeof global&&global;(k.global===k||k.window===k)&&(t=k);var w={},j=+new Date+"",O=200,P=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],S="[object Arguments]",A="[object Array]",C="[object Boolean]",N="[object Date]",T="[object Function]",E="[object Number]",q="[object Object]",I="[object RegExp]",J="[object String]",U={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},M=[],D={};t._;var F=RegExp("^"+(D.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),R=(Math.ceil,t.clearTimeout,M.concat,Math.floor,F.test(R=Object.getPrototypeOf)&&R),H=D.hasOwnProperty,B=(M.push,t.setTimeout,D.toString),z=F.test(z=B.bind)&&z,$=F.test($=Array.isArray)&&$,K=(t.isFinite,t.isNaN,F.test(K=Object.keys)&&K),L=Math.max;Math.min,Math.random,M.slice;var Y=F.test(t.attachEvent),G=z&&!/\n|true/.test(z+Y),Q=e.support={};(function(){var t=function(){this.x=1},e=[];t.prototype={valueOf:1,y:1};for(var n in new t)e.push(n);for(n in arguments);Q.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),Q.argsClass=i(arguments),Q.enumPrototypes=t.propertyIsEnumerable("prototype"),Q.fastBind=z&&!G,Q.ownLast="x"!=e[0],Q.nonEnumArgs=0!=n,Q.nonEnumShadows=!/valueOf/.test(e),Q.unindexedChars="xx"!="x"[0]+Object("x")[0];try{Q.nodeClass=!(B.call(document)==q&&!({toString:0}+""))}catch(r){Q.nodeClass=!0}})(1);var Z=function(t){var e="var index, iterable = "+t.firstArg+", result = "+t.init+";\nif (!iterable) return result;\n"+t.top+";\n";if(t.arrays?(e+="var length = iterable.length; index = -1;\nif ("+t.arrays+") {  ",Q.unindexedChars&&(e+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),e+="\n  while (++index < length) {\n    "+t.loop+"\n  }\n}\nelse {  "):Q.nonEnumArgs&&(e+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+t.loop+"\n    }\n  } else {  "),Q.enumPrototypes&&(e+="\n  var skipProto = typeof iterable == 'function';\n  "),t.useHas&&t.useKeys)e+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] ? keys(iterable) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    ",Q.enumPrototypes&&(e+="if (!(skipProto && index == 'prototype')) {\n  "),e+=t.loop,Q.enumPrototypes&&(e+="}\n"),e+="  }  ";else if(e+="\n  for (index in iterable) {",(Q.enumPrototypes||t.useHas)&&(e+="\n    if (",Q.enumPrototypes&&(e+="!(skipProto && index == 'prototype')"),Q.enumPrototypes&&t.useHas&&(e+=" && "),t.useHas&&(e+="hasOwnProperty.call(iterable, index)"),e+=") {    "),e+=t.loop+";    ",(Q.enumPrototypes||t.useHas)&&(e+="\n    }"),e+="\n  }    ",Q.nonEnumShadows){e+="\n\n  var ctor = iterable.constructor;\n      ";for(var n=0;7>n;n++)e+="\n  index = '"+t.shadowedProps[n]+"';\n  if (","constructor"==t.shadowedProps[n]&&(e+="!(ctor && ctor.prototype === iterable) && "),e+="hasOwnProperty.call(iterable, index)) {\n    "+t.loop+"\n  }      "}return(t.arrays||Q.nonEnumArgs)&&(e+="\n}"),e+=t.bottom+";\nreturn result"},V={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : lodash.createCallback(callback, thisArg)",arrays:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},W={top:"if (!objectTypes[typeof iterable]) return result;\n"+V.top,arrays:!1};Q.argsClass||(i=function(t){return t?H.call(t,"callee"):!1});var X=n({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)",arrays:!1}),te=K?function(t){return p(t)?Q.enumPrototypes&&"function"==typeof t||Q.nonEnumArgs&&t.length&&i(t)?X(t):K(t):[]}:X,ee=n(V),ne=n(V,W,{useHas:!1}),re=n(V,W);c(/x/)&&(c=function(t){return t instanceof Function||B.call(t)==T});var oe=R?function(t){if(!t||B.call(t)!=q||!Q.argsClass&&i(t))return!1;var e=t.valueOf,n="function"==typeof e&&(n=R(e))&&R(n);return n?t==n||R(t)==n:o(t)}:o;e.createCallback=x,e.forEach=_,e.forIn=ne,e.forOwn=re,e.keys=te,e.merge=d,e.uniq=g,e.each=_,e.unique=g,e.identity=v,e.indexOf=h,e.isArguments=i,e.isArray=s,e.isBoolean=u,e.isEqual=a,e.isFunction=c,e.isObject=p,e.isPlainObject=oe,e.isString=f,e.isUndefined=l,e.sortedIndex=y,e.VERSION="1.2.0","function"==typeof define&&"object"==typeof define.amd&&define.amd?(t._=e,define("lodash",[],function(){return e})):m&&!m.nodeType?b?(b.exports=e)._=e:m._=e:t._=e}(this),define("io-query",["lodash"],function(){var t={};return{objectToQuery:function(e){var n=encodeURIComponent,r=[];for(var o in e){var i=e[o];if(i!=t[o]){var s=n(o)+"=";if(_.isArray(i))for(var u=0,a=i.length;a>u;++u)r.push(s+n(i[u]));else r.push(s+n(i))}}return r.join("&")},queryToObject:function(t){for(var e,n,r,o=decodeURIComponent,i=t.split("&"),s={},u=0,a=i.length;a>u;++u)if(r=i[u],r.length){var c=r.indexOf("=");0>c?(e=o(r),n=""):(e=o(r.slice(0,c)),n=o(r.slice(c+1))),"string"==typeof s[e]&&(s[e]=[s[e]]),_.isArray(s[e])?s[e].push(n):s[e]=n}return s}}}),!function(t,e){var n=function(){return n.get.apply(n,arguments)},r=n.utils={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isPlainObject:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)},toArray:function(t){return Array.prototype.slice.call(t)},getKeys:Object.keys||function(t){var e=[],n="";for(n in t)t.hasOwnProperty(n)&&e.push(n);return e},escape:function(t){return(t+"").replace(/[,;"\\=\s%]/g,function(t){return encodeURIComponent(t)})},retrieve:function(t,e){return null==t?e:t}};n.defaults={},n.expiresMultiplier=86400,n.set=function(n,o,i){if(r.isPlainObject(n))for(var s in n)n.hasOwnProperty(s)&&this.set(s,n[s],o);else{i=r.isPlainObject(i)?i:{expires:i};var u=i.expires!==e?i.expires:this.defaults.expires||"",a=typeof u;"string"===a&&""!==u?u=new Date(u):"number"===a&&(u=new Date(+new Date+1e3*this.expiresMultiplier*u)),""!==u&&"toGMTString"in u&&(u=";expires="+u.toGMTString());var c=i.path||this.defaults.path;c=c?";path="+c:"";var p=i.domain||this.defaults.domain;p=p?";domain="+p:"";var f=i.secure||this.defaults.secure?";secure":"";t.cookie=r.escape(n)+"="+r.escape(o)+u+c+p+f}return this},n.remove=function(t){t=r.isArray(t)?t:r.toArray(arguments);for(var e=0,n=t.length;n>e;e++)this.set(t[e],"",-1);return this},n.empty=function(){return this.remove(r.getKeys(this.all()))},n.get=function(t,n){n=n||e;var o=this.all();if(r.isArray(t)){for(var i={},s=0,u=t.length;u>s;s++){var a=t[s];i[a]=r.retrieve(o[a],n)}return i}return r.retrieve(o[t],n)},n.all=function(){if(""===t.cookie)return{};for(var e=t.cookie.split("; "),n={},r=0,o=e.length;o>r;r++){var i=e[r].split("=");n[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return n},n.enabled=function(){if(navigator.cookieEnabled)return!0;var t="_"===n.set("_","_").get("_");return n.remove("_"),t},"function"==typeof define&&define.amd?define("cookie",[],function(){return n}):"undefined"!=typeof exports?exports.cookie=n:window.cookie=n}(document),define("trak",["jsonp","exceptions","io-query","cookie","lodash"],function(t,e,n,r,o){var i;return i=function(){function i(){this.io=this}return i.prototype.initialize=function(t,e){return this._api_token=t,null==e&&(e={}),this.protocol(e.protocol),e.host&&this.host(e.host),e.context&&this.context(e.context),e.medium&&this.medium(e.medium),this.distinct_id(e.distinct_id||null),e.track_page_views!==!1?this.page_view():void 0},i.prototype.initialise=function(){return this.initialize.apply(this,arguments)},i.prototype.jsonp=new t,i.prototype.call=function(){return this.jsonp.call.apply(this.jsonp,arguments)},i.prototype.identify=function(t,e){var n,r;return o.isString(t)?(n=t,r=e,this.distinct_id(n)):r=t,r||(r={}),n||(n=this.distinct_id()),this.call("identify",{distinct_id:n,data:{properties:r}}),null},i.prototype.alias=function(t,n){var r,i,s;if(o.isString(t)&&o.isString(n)?(i=t,r=n,s=!1):o.isString(t)&&o.isBoolean(n)?(i=this.distinct_id(),r=t,s=!1):(i=this.distinct_id(),r=t,s=!0),!r)throw new e.MissingParameter("Missing a required parameter.",400,"You must provide an alias, see http://docs.trak.io/alias.html");return this.call("alias",{data:{distinct_id:i,alias:r}}),s&&this.distinct_id(r),null},i.prototype.track=function(t,n,r,i,s){var u,a,c,p,f;if(o.isString(t)&&(o.isObject(n)||o.isUndefined(n))?(c=t,f=n,u=r):o.isString(t)&&o.isString(n)&&(o.isObject(r)||o.isUndefined(r))?(c=t,p=n,f=r,u=i):o.isString(t)&&o.isString(n)&&o.isString(r)&&(a=t,c=n,p=r,f=i,u=s),a||(a=this.distinct_id()),u||(u={}),o.merge(u,this.context()),p||(p=this.medium()),f||(f={}),!c)throw new e.MissingParameter("Missing a required parameter.",400,"You must provide an event to track, see http://docs.trak.io/track.html");return this.call("track",{data:{distinct_id:a,event:c,medium:p,context:u,properties:f}}),null},i.prototype.page_view=function(t,e){return null==t&&(t=this.url()),null==e&&(e=this.page_title()),this.track("page_view",{url:t,page_title:e})},i.prototype._protocol="https",i.prototype.protocol=function(t){return t&&(this._protocol=t),""+this._protocol+"://"},i.prototype._host="api.trak.io",i.prototype.host=function(t){return t&&(this._host=t),this._host},i.prototype._current_context=!1,i.prototype.current_context=function(t,e){var n;return this._current_context||(this._current_context=(n=this.get_cookie("context"))?JSON.parse(n):{}),"object"==typeof t?o.merge(this._current_context,t):t&&e&&(this._current_context[t]=e),this.set_cookie("context",JSON.stringify(this._current_context)),this._current_context},i.prototype.default_context=function(){var t,e;return e=this.url(),t=this.referrer(),{ip:null,user_agent:navigator.userAgent,url:e,params:e.indexOf("?")>0?n.queryToObject(e.substring(e.indexOf("?")+1,e.length)):{},referrer:t,referrer_params:t.indexOf("?")>0?n.queryToObject(t.substring(t.indexOf("?")+1,t.length)):{}}},i.prototype.context=function(t,e){var n;return n={},o.merge(n,this.default_context(),this.current_context(t,e)),n},i.prototype.url=function(){return window.location.href},i.prototype.referrer=function(){return document.referrer},i.prototype.page_title=function(){return document.title},i.prototype._medium=!1,i.prototype.medium=function(t){return this._medium||(this._medium=this.get_cookie("medium"))||(this._medium="web_site"),t&&(this._medium=t,this.set_cookie("medium",t)),this._medium},i.prototype._api_token=null,i.prototype.api_token=function(){return this._api_token},i.prototype._distinct_id=null,i.prototype.distinct_id=function(t){return t&&(this._distinct_id=t),this._distinct_id||(this._distinct_id=this.get_cookie("id"))||(this._distinct_id=this.generate_distinct_id()),this.set_cookie("id",this._distinct_id),this._distinct_id},i.prototype.generate_distinct_id=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e,n;return e=0|16*Math.random(),n="x"===t?e:8|3&e,n.toString(16)})},i.prototype.set_cookie=function(t,e){return r.set(this.cookie_key(t),e)},i.prototype.get_cookie=function(t){return r.get(this.cookie_key(t))},i.prototype.cookie_key=function(t){return"_trak_"+this.api_token()+"_"+t},i}()}),define("trak.io",["trak","lodash","cookie"],function(t,e,n){var r,o,i,s;for(s=new t,i=window.trak,window.trak=s;i&&i.length>0;)r=i.shift(),o=r.shift(),s.io[o]&&s.io[o].apply(s.io,r);return n.defaults.expires=3650,n.defaults.path="/",window.cookie=n}),require(["trak.io"]);