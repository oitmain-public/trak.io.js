!function(){var requirejs,require,define;!function(t){function e(t,e){return g.call(t,e)}function n(t,e){var n,r,o,i,a,s,u,c,p,f,l,d=e&&e.split("/"),_=h.map,y=_&&_["*"]||{};if(t&&"."===t.charAt(0))if(e){for(d=d.slice(0,d.length-1),t=t.split("/"),a=t.length-1,h.nodeIdCompat&&v.test(t[a])&&(t[a]=t[a].replace(v,"")),t=d.concat(t),p=0;p<t.length;p+=1)if(l=t[p],"."===l)t.splice(p,1),p-=1;else if(".."===l){if(1===p&&(".."===t[2]||".."===t[0]))break;p>0&&(t.splice(p-1,2),p-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((d||y)&&_){for(n=t.split("/"),p=n.length;p>0;p-=1){if(r=n.slice(0,p).join("/"),d)for(f=d.length;f>0;f-=1)if(o=_[d.slice(0,f).join("/")],o&&(o=o[r])){i=o,s=p;break}if(i)break;!u&&y&&y[r]&&(u=y[r],c=p)}!i&&u&&(i=u,s=c),i&&(n.splice(0,s,i),t=n.join("/"))}return t}function r(e,n){return function(){return p.apply(t,m.call(arguments,0).concat([e,n]))}}function o(t){return function(e){return n(e,t)}}function i(t){return function(e){d[t]=e}}function a(n){if(e(_,n)){var r=_[n];delete _[n],y[n]=!0,c.apply(t,r)}if(!e(d,n)&&!e(y,n))throw new Error("No "+n);return d[n]}function s(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function u(t){return function(){return h&&h.config&&h.config[t]||{}}}var c,p,f,l,d={},_={},h={},y={},g=Object.prototype.hasOwnProperty,m=[].slice,v=/\.js$/;f=function(t,e){var r,i=s(t),u=i[0];return t=i[1],u&&(u=n(u,e),r=a(u)),u?t=r&&r.normalize?r.normalize(t,o(e)):n(t,e):(t=n(t,e),i=s(t),u=i[0],t=i[1],u&&(r=a(u))),{f:u?u+"!"+t:t,n:t,pr:u,p:r}},l={require:function(t){return r(t)},exports:function(t){var e=d[t];return"undefined"!=typeof e?e:d[t]={}},module:function(t){return{id:t,uri:"",exports:d[t],config:u(t)}}},c=function(n,o,s,u){var c,p,h,g,m,v,x=[],b=typeof s;if(u=u||n,"undefined"===b||"function"===b){for(o=!o.length&&s.length?["require","exports","module"]:o,m=0;m<o.length;m+=1)if(g=f(o[m],u),p=g.f,"require"===p)x[m]=l.require(n);else if("exports"===p)x[m]=l.exports(n),v=!0;else if("module"===p)c=x[m]=l.module(n);else if(e(d,p)||e(_,p)||e(y,p))x[m]=a(p);else{if(!g.p)throw new Error(n+" missing "+p);g.p.load(g.n,r(u,!0),i(p),{}),x[m]=d[p]}h=s?s.apply(d[n],x):void 0,n&&(c&&c.exports!==t&&c.exports!==d[n]?d[n]=c.exports:h===t&&v||(d[n]=h))}else n&&(d[n]=s)},requirejs=require=p=function(e,n,r,o,i){if("string"==typeof e)return l[e]?l[e](n):a(f(e,n).f);if(!e.splice){if(h=e,h.deps&&p(h.deps,h.callback),!n)return;n.splice?(e=n,n=r,r=null):e=t}return n=n||function(){},"function"==typeof r&&(r=o,o=i),o?c(t,e,n,r):setTimeout(function(){c(t,e,n,r)},4),p},p.config=function(t){return p(t)},requirejs._defined=d,define=function(t,n,r){n.splice||(r=n,n=[]),e(d,t)||e(_,t)||(_[t]=[t,n,r])},define.amd={jQuery:!0}}(),define("../bower_components/almond/almond",function(){});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exception",[],function(){var t;return t=function(t){function e(t,e,n,r){this.message=t,this.code=e,this.details=n,this.data=r}return __extends(e,t),e}(Error)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/data_object_invalid_json",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/duplicated_distinct_ids",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/internal_service_error",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/invalid_token",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/missing_parameter",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/person_not_found",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/properties_object_invalid",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/revenue_property_invalid",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/route_not_found",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/timeout",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)}),define("exceptions/unknown",["exception"],function(){var t;return t=function(){function t(t,e,n,r){this.message=t,this.code=e,this.details=n,this.data=r}return t}()}),define("exceptions",["exception","exceptions/data_object_invalid_json","exceptions/duplicated_distinct_ids","exceptions/internal_service_error","exceptions/invalid_token","exceptions/missing_parameter","exceptions/person_not_found","exceptions/properties_object_invalid","exceptions/revenue_property_invalid","exceptions/route_not_found","exceptions/timeout","exceptions/unknown"],function(t,e,n,r,o,i,a,s,u,c,p,f){return{Exception:t,DataObjectInvalidJson:e,DuplicatedDistinctIds:n,InternalServiceError:r,InvalidToken:o,MissingParameter:i,PersonNotFound:a,PropertiesObjectInvalid:s,RevenuePropertyInvalid:u,RouteNotFound:c,Timeout:p,Unknown:f}}),"object"!=typeof JSON&&(JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,o,i,a,s=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(i=u.length,n=0;i>n;n+=1)a[n]=str(n,u)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,u),o&&a.push(quote(r)+(gap?": ":":")+o));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(o=str(r,u),o&&a.push(quote(r)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(t,e){var n,r,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json2",function(t){return function(){var e;return e||t.JSON}}(this)),function(t){function e(e){function n(){}function r(){for(var t,e={shadowedProps:u,arrays:"isArray(iterable)",bottom:"",init:"iterable",loop:"",top:"",useHas:!0,useKeys:!!ee},r=0;t=arguments[r];r++)for(var o in t)e[o]=t[o];var i=e.args;e.firstArg=/^[^,]+/.exec(i)[0];var a=Function("hasOwnProperty, isArguments, isArray, isString, keys, lodash, objectTypes","return function("+i+") {\n"+V(e)+"\n}");return a(B,b,k,S,ee,n,m)}function o(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function x(t){var e=!1;if(!t||L.call(t)!=h||!Z.argsClass&&b(t))return e;var n=t.constructor;return(O(n)?n instanceof n:Z.nodeClass||!o(t))?Z.ownLast?(re(t,function(t,n,r){return e=B.call(r,n),!1}),e===!0):(re(t,function(t,n){e=n}),e===!1||B.call(t,e)):e}function b(t){return L.call(t)==c}function k(t){return Z.argsObject&&t instanceof Array||(z?z(t):L.call(t)==p)}function w(t){return t===!0||t===!1||L.call(t)==f}function j(t,e,r,a,s,u){var d=r===i;if("function"==typeof r&&!d){r=n.createCallback(r,a,2);var m=r(t,e);if("undefined"!=typeof m)return!!m}if(t===e)return 0!==t||1/t==1/e;var v=typeof t,x=typeof e;if(t===t&&(!t||"function"!=v&&"object"!=v)&&(!e||"function"!=x&&"object"!=x))return!1;if(null==t||null==e)return t===e;var k=L.call(t),w=L.call(e);if(k==c&&(k=h),w==c&&(w=h),k!=w)return!1;switch(k){case f:case l:return+t==+e;case _:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case y:case g:return t==String(e)}var P=k==p;if(!P){if(B.call(t,"__wrapped__ ")||B.call(e,"__wrapped__"))return j(t.__wrapped__||t,e.__wrapped__||e,r,a,s,u);if(k!=h||!Z.nodeClass&&(o(t)||o(e)))return!1;var S=!Z.argsObject&&b(t)?Object:t.constructor,A=!Z.argsObject&&b(e)?Object:e.constructor;if(S!=A&&!(O(S)&&S instanceof S&&O(A)&&A instanceof A))return!1}s||(s=[]),u||(u=[]);for(var C=s.length;C--;)if(s[C]==t)return u[C]==e;var E=0;if(m=!0,s.push(t),u.push(e),P){if(C=t.length,E=e.length,m=E==t.length,!m&&!d)return m;for(;E--;){var T=C,N=e[E];if(d)for(;T--&&!(m=j(t[T],N,r,a,s,u)););else if(!(m=j(t[E],N,r,a,s,u)))break}return m}return re(e,function(e,n,o){return B.call(o,n)?(E++,m=B.call(t,n)&&j(t[n],e,r,a,s,u)):void 0}),m&&!d&&re(t,function(t,e,n){return B.call(n,e)?m=--E>-1:void 0}),m}function O(t){return"function"==typeof t}function P(t){return t?m[typeof t]:!1}function S(t){return"string"==typeof t||L.call(t)==g}function A(t){return"undefined"==typeof t}function C(t,e,r){var o=arguments,a=0,s=2;if(!P(t))return t;if(r===i)var u=o[3],c=o[4],p=o[5];else c=[],p=[],"number"!=typeof r&&(s=o.length),s>3&&"function"==typeof o[s-2]?u=n.createCallback(o[--s-1],o[s--],2):s>2&&"function"==typeof o[s-1]&&(u=o[--s]);for(;++a<s;)(k(o[a])?E:oe)(o[a],function(e,n){var r,o,a=e,s=t[n];if(e&&((o=k(e))||ie(e))){for(var f=c.length;f--;)if(r=c[f]==e){s=p[f];break}if(!r){var l;u&&(a=u(s,e),(l="undefined"!=typeof a)&&(s=a)),l||(s=o?k(s)?s:[]:ie(s)?s:{}),c.push(e),p.push(s),l||(s=C(s,e,i,u,c,p))}}else u&&(a=u(s,e),"undefined"==typeof a&&(a=e)),"undefined"!=typeof a&&(s=a);t[n]=s});return t}function E(t,e,n){if(e&&"undefined"==typeof n&&k(t))for(var r=-1,o=t.length;++r<o&&e(t[r],r,t)!==!1;);else ne(t,e,n);return t}function T(t,e,n){var r=-1,o=t?t.length:0;if("number"==typeof n)r=(0>n?Y(0,o+n):n||0)-1;else if(n)return r=N(t,e),t[r]===e?r:-1;for(;++r<o;)if(t[r]===e)return r;return-1}function N(t,e,r,o){var i=0,a=t?t.length:i;for(r=r?n.createCallback(r,o,1):M,e=r(e);a>i;){var s=i+a>>>1;r(t[s])<e?i=s+1:a=s}return i}function I(){return e._=D,this}function q(t,e,r,o){var i=-1,u=t?t.length:0,c=[],p=c;"boolean"!=typeof e&&null!=e&&(o=r,r=e,e=!1);var f=!e&&u>=s;if(f)var l={};for(null!=r&&(p=[],r=n.createCallback(r,o));++i<u;){var d=t[i],_=r?r(d,i,t):d;if(f)var h=a+_,y=l[h]?!(p=l[h]):p=l[h]=[];(e?!i||p[p.length-1]!==_:y||T(p,_)<0)&&((r||f)&&p.push(_),c.push(d))}return c}function J(t,e,n){if(null==t)return M;var r=typeof t;if("function"!=r){if("object"!=r)return function(e){return e[t]};var o=ee(t);return function(e){for(var n=o.length,r=!1;n--&&(r=j(e[o[n]],t[o[n]],i)););return r}}return"undefined"!=typeof e?1===n?function(n){return t.call(e,n)}:2===n?function(n,r){return t.call(e,n,r)}:4===n?function(n,r,o,i){return t.call(e,n,r,o,i)}:function(n,r,o){return t.call(e,n,r,o)}:t}function M(t){return t}e=e?v.defaults(t.Object(),e,v.pick(t,contextProps)):t;var U=Array(),R=Object(),D=t._,F=RegExp("^"+String(R.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),H=(Math.ceil,t.clearTimeout,U.concat,Math.floor,F.test(H=Object.getPrototypeOf)&&H),B=R.hasOwnProperty,L=(U.push,t.setTimeout,R.toString),$=F.test($=L.bind)&&$,z=F.test(z=Array.isArray)&&z,K=(t.isFinite,t.isNaN,F.test(K=Object.keys)&&K),Y=Math.max,G=(Math.min,Math.random,U.slice,F.test(t.attachEvent)),Q=$&&!/\n|true/.test($+G),Z=n.support={};!function(){var t=function(){this.x=1},e=[];t.prototype={valueOf:1,y:1};for(var n in new t)e.push(n);for(n in arguments);Z.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),Z.argsClass=b(arguments),Z.enumPrototypes=t.propertyIsEnumerable("prototype"),Z.fastBind=$&&!Q,Z.ownLast="x"!=e[0],Z.nonEnumArgs=0!=n,Z.nonEnumShadows=!/valueOf/.test(e),Z.unindexedChars="x"[0]+Object("x")[0]!="xx";try{Z.nodeClass=!(L.call(document)==h&&!({toString:0}+""))}catch(r){Z.nodeClass=!0}}(1);var V=function(t){var e="var index, iterable = "+t.firstArg+", result = "+t.init+";\nif (!iterable) return result;\n"+t.top+";\n";if(t.arrays?(e+="var length = iterable.length; index = -1;\nif ("+t.arrays+") {  ",Z.unindexedChars&&(e+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),e+="\n  while (++index < length) {\n    "+t.loop+"\n  }\n}\nelse {  "):Z.nonEnumArgs&&(e+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+t.loop+"\n    }\n  } else {  "),Z.enumPrototypes&&(e+="\n  var skipProto = typeof iterable == 'function';\n  "),t.useHas&&t.useKeys)e+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] ? keys(iterable) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    ",Z.enumPrototypes&&(e+="if (!(skipProto && index == 'prototype')) {\n  "),e+=t.loop,Z.enumPrototypes&&(e+="}\n"),e+="  }  ";else if(e+="\n  for (index in iterable) {",(Z.enumPrototypes||t.useHas)&&(e+="\n    if (",Z.enumPrototypes&&(e+="!(skipProto && index == 'prototype')"),Z.enumPrototypes&&t.useHas&&(e+=" && "),t.useHas&&(e+="hasOwnProperty.call(iterable, index)"),e+=") {    "),e+=t.loop+";    ",(Z.enumPrototypes||t.useHas)&&(e+="\n    }"),e+="\n  }    ",Z.nonEnumShadows){e+="\n\n  var ctor = iterable.constructor;\n      ";for(var n=0;7>n;n++)e+="\n  index = '"+t.shadowedProps[n]+"';\n  if (","constructor"==t.shadowedProps[n]&&(e+="!(ctor && ctor.prototype === iterable) && "),e+="hasOwnProperty.call(iterable, index)) {\n    "+t.loop+"\n  }      "}return(t.arrays||Z.nonEnumArgs)&&(e+="\n}"),e+=t.bottom+";\nreturn result"},W={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : lodash.createCallback(callback, thisArg)",arrays:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},X={top:"if (!objectTypes[typeof iterable]) return result;\n"+W.top,arrays:!1};Z.argsClass||(b=function(t){return t?B.call(t,"callee"):!1});var te=r({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)",arrays:!1}),ee=K?function(t){return P(t)?Z.enumPrototypes&&"function"==typeof t||Z.nonEnumArgs&&t.length&&b(t)?te(t):K(t):[]}:te,ne=r(W),re=r(W,X,{useHas:!1}),oe=r(W,X);O(/x/)&&(O=function(t){return t instanceof Function||L.call(t)==d});var ie=H?function(t){if(!t||L.call(t)!=h||!Z.argsClass&&b(t))return!1;var e=t.valueOf,n="function"==typeof e&&(n=H(e))&&H(n);return n?t==n||H(t)==n:x(t)}:x;return n.createCallback=J,n.forEach=E,n.forIn=re,n.forOwn=oe,n.keys=ee,n.merge=C,n.uniq=q,n.each=E,n.unique=q,n.identity=M,n.indexOf=T,n.isArguments=b,n.isArray=k,n.isBoolean=w,n.isEqual=j,n.isFunction=O,n.isObject=P,n.isPlainObject=ie,n.isString=S,n.isUndefined=A,n.sortedIndex=N,n.noConflict=I,n.VERSION="1.2.0",n}var n="object"==typeof exports&&exports,r="object"==typeof module&&module&&module.exports==n&&module,o="object"==typeof global&&global;(o.global===o||o.window===o)&&(t=o);var i={},a=+new Date+"",s=200,u=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],c="[object Arguments]",p="[object Array]",f="[object Boolean]",l="[object Date]",d="[object Function]",_="[object Number]",h="[object Object]",y="[object RegExp]",g="[object String]",m={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},v=e();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t._=v,define("lodash",[],function(){return v})):n&&!n.nodeType?r?(r.exports=v)._=v:n._=v:t._=v}({}),define("jsonp",["exceptions","json2","lodash"],function(t,e,n){var r;return r=function(){function r(){}return r.prototype.count=0,r.prototype.call=function(t,e,n){return this.jsonp(this.url(t,e),n)},r.prototype.url=function(t,e){return trak.io.protocol()+trak.io.host()+"/"+t+this.params(t,e)},r.prototype.params=function(t,r){var o,i,a,s;a=this.default_params(t),n.merge(a,r,function(t,e){return n.isArray(t)?n.uniq(t.concat(e)):void 0}),o=[];for(i in a)s=a[i],(n.isArray(s)||n.isObject(s))&&(s=e.stringify(s)),o.push(i+"="+encodeURIComponent(s));return"?"+o.join("&")},r.prototype.default_params=function(t){switch(t){case"identify":return{token:trak.io.api_token(),data:{distinct_id:trak.io.distinct_id(),properties:{}}};case"alias":return{token:trak.io.api_token(),data:{distinct_id:trak.io.distinct_id()}};case"track":return{token:trak.io.api_token(),data:{distinct_id:trak.io.distinct_id(),properties:{},channel:trak.io.channel(),context:trak.io.context()}};default:return{}}},r.prototype.callback=function(e,n){var r;if(!e||!e.status||"success"!==e.status)throw e.exception&&(r=t[e.exception.match(/\:\:([a-zA-Z0-9]+)$/)[1]])?new r(e.message,e.code,e.details,e):new t.Unknown(e.message,e.code,e.details,e);return n?n(e):void 0},r.prototype.noop=function(){},r.prototype.jsonp=function(t,e){var n,r,o,i,a,s,u;return s=1e4,a=document.getElementsByTagName("script")[0],r=this.count++,o=this,s&&(u=setTimeout(function(){return n(),o.callback({status:"error",exception:"TrakioAPI::Exceptions::Timeout",message:"The server failed to respond in time."})},s)),n=function(){return i.parentNode.removeChild(i),window["__trak"+r]=this.noop},o=this,window["__trak"+r]=function(t){return u&&clearTimeout(u),n(),o.callback(t,e)},t+=(~t.indexOf("?")?"&":"?")+"callback="+encodeURIComponent("__trak"+r),t=t.replace("?&","?"),i=document.createElement("script"),i.src=t,a.parentNode.insertBefore(i,a)},r}()}),define("io-query",["lodash"],function(t){var e={};return{objectToQuery:function(n){var r=encodeURIComponent,o=[];for(var i in n){var a=n[i];if(a!=e[i]){var s=r(i)+"=";if(t.isArray(a))for(var u=0,c=a.length;c>u;++u)o.push(s+r(a[u]));else o.push(s+r(a))}}return o.join("&")},queryToObject:function(e){for(var n,r,o,i=decodeURIComponent,a=e.split("&"),s={},u=0,c=a.length;c>u;++u)if(o=a[u],o.length){var p=o.indexOf("=");0>p?(n=i(o),r=""):(n=i(o.slice(0,p)),r=i(o.slice(p+1))),"string"==typeof s[n]&&(s[n]=[s[n]]),t.isArray(s[n])?s[n].push(r):s[n]=r}return s}}}),!function(t,e){var n=function(){return n.get.apply(n,arguments)},r=n.utils={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isPlainObject:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)},toArray:function(t){return Array.prototype.slice.call(t)},getKeys:Object.keys||function(t){var e=[],n="";for(n in t)t.hasOwnProperty(n)&&e.push(n);return e},escape:function(t){return String(t).replace(/[,;"\\=\s%]/g,function(t){return encodeURIComponent(t)})},retrieve:function(t,e){return null==t?e:t}};n.defaults={},n.expiresMultiplier=86400,n.set=function(n,o,i){if(r.isPlainObject(n))for(var a in n)n.hasOwnProperty(a)&&this.set(a,n[a],o);else{i=r.isPlainObject(i)?i:{expires:i};var s=i.expires!==e?i.expires:this.defaults.expires||"",u=typeof s;"string"===u&&""!==s?s=new Date(s):"number"===u&&(s=new Date(+new Date+1e3*this.expiresMultiplier*s)),""!==s&&"toGMTString"in s&&(s=";expires="+s.toGMTString());var c=i.path||this.defaults.path;c=c?";path="+c:"";var p=i.domain||this.defaults.domain;p=p?";domain="+p:"";var f=i.secure||this.defaults.secure?";secure":"";t.cookie=r.escape(n)+"="+r.escape(o)+s+c+p+f}return this},n.remove=function(t){t=r.isArray(t)?t:r.toArray(arguments);for(var e=0,n=t.length;n>e;e++)this.set(t[e],"",-1);return this},n.empty=function(){return this.remove(r.getKeys(this.all()))},n.get=function(t,n){n=n||e;var o=this.all();if(r.isArray(t)){for(var i={},a=0,s=t.length;s>a;a++){var u=t[a];i[u]=r.retrieve(o[u],n)}return i}return r.retrieve(o[t],n)},n.all=function(){if(""===t.cookie)return{};for(var e=t.cookie.split("; "),n={},r=0,o=e.length;o>r;r++){var i=e[r].split("=");n[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return n},n.enabled=function(){if(navigator.cookieEnabled)return!0;var t="_"===n.set("_","_").get("_");return n.remove("_"),t},"function"==typeof define&&define.amd?define("cookie",[],function(){return n}):"undefined"!=typeof exports?exports.cookie=n:window.cookie=n}(document),define("trak",["jsonp","exceptions","io-query","cookie","lodash"],function(t,e,n,r,o){var i;return i=function(){function i(){this.io=this}return i.prototype.loaded=!0,i.prototype.Exceptions=e,i.prototype.cookie=r,i.prototype.initialize=function(t,e){var n;return this._api_token=t,null==e&&(e={}),this.protocol(e.protocol),e.host&&this.host(e.host),e.context&&this.context(e.context),e.channel&&this.channel(e.channel),this.distinct_id(e.distinct_id||null),this.root_domain(e.root_domain||null),e.automagic?this.automagic||this.load_automagic(e.automagic):this.automagic(!1),n=this,e.auto_track_page_views!==!1&&this.page_ready(function(){return n.page_view()}),this},i.prototype.initialise=function(){return this.initialize.apply(this,arguments)},i.prototype.automagic=!1,i.prototype.load_automagic=function(t){var e,n;return null==t&&(t={minified:!1}),n=document.createElement("script"),n.src=t.minified?"/trak.automagic.min.js":"/trak.automagic.js",e=this,n.onload=function(){return e.automagic(new Automagic),e.automagic().initialize(t)},document.head.insertBefore(n,document.head.firstChild)},i.prototype.page_ready_event_fired=!1,i.prototype.page_ready=function(t){var e,n,r,o;if(r=this,n=function(){return r.page_ready_event_fired?void 0:(r.page_ready_event_fired=!0,t())},e=function(){var t;if(!this.page_ready_event_fired){try{document.documentElement.doScroll("left")}catch(r){return t=r,void setTimeout(e,1)}return n()}},"complete"===document.readyState)return n();if(document.addEventListener)return document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);if(document.attachEvent){document.attachEvent("onreadystatechange",n),window.attachEvent("onload",n),o=!1;try{o=null==window.frameElement}catch(i){}if(document.documentElement.doScroll&&o)return e()}},i.prototype.jsonp=new t,i.prototype.call=function(){return this.jsonp.call.apply(this.jsonp,arguments)},i.prototype.identify=function(){var t,e,n,r,o,i,a,s,u;o=this,"number"==typeof arguments[0]&&(arguments[0]=arguments[0].toString()),t=this.sort_arguments(arguments,["string","object","function"]),n=t[0]||this.distinct_id(),i=t[1]||null,e=t[2]||null,a=0;for(s in i)u=i[s],a++;return r=function(t){return i?o.call("identify",{data:{distinct_id:n,properties:i}},e):e?e(t):void 0},t[0]?o.alias(n,r):i&&a>0?r():e&&e({status:"unnecessary"}),this},i.prototype.alias=function(){var t,n,r,o,i;if("number"==typeof arguments[0]&&(arguments[0]=arguments[0].toString()),n=this.sort_arguments(arguments,["string","string","boolean","function"]),o=(n[1]?n[0]:void 0)||this.distinct_id(),t=n[1]?n[1]:n[0],i=null!==n[2]?n[2]:n[1]?!1:!0,r=n[3]||null,!t)throw new e.MissingParameter("Missing a required parameter.",400,"You must provide an alias, see http://docs.trak.io/alias.html");return t!==o?(this.call("alias",{data:{distinct_id:o,alias:t}},r),i&&this.distinct_id(t)):r&&r({status:"unnecessary"}),this},i.prototype.track=function(){var t,n,r,i,a,s,u;if(t=this.sort_arguments(arguments,["string","string","string","object","object","function"]),a=(t[2]?arguments[0]:void 0)||this.distinct_id(),s=t[2]?t[1]:t[0],r=(t[2]?t[2]:t[1])||this.channel(),u=t[3]||{},i=t[4]||{},i=o.merge(this.context(),i),n=t[5]||null,!s)throw new e.MissingParameter("Missing a required parameter.",400,"You must provide an event to track, see http://docs.trak.io/track.html");return this.call("track",{data:{distinct_id:a,event:s,channel:r,context:i,properties:u}},n),this},i.prototype.page_view=function(){var t,e,n,r;return t=this.sort_arguments(arguments,["string","string","function"]),r=t[0]||this.url(),n=t[1]||this.page_title(),e=t[2]||null,this.track("page_view",{url:r,page_title:n},e),this},i.prototype._protocol="https",i.prototype.protocol=function(t){return t&&(this._protocol=t),""+this._protocol+"://"},i.prototype._host="api.trak.io/v1",i.prototype.host=function(t){return t&&(this._host=t),this._host},i.prototype._automagic=!1,i.prototype.automagic=function(t){return t&&(this._automagic=t),this._automagic},i.prototype._current_context=!1,i.prototype.current_context=function(t,e){var n;return this._current_context||(this._current_context=(n=this.get_cookie("context"))?JSON.parse(n):{}),"object"==typeof t?o.merge(this._current_context,t):t&&e&&(this._current_context[t]=e),this.set_cookie("context",JSON.stringify(this._current_context)),this._current_context},i.prototype.default_context=function(){var t,e;return e=this.url(),t=this.referer(),{ip:null,user_agent:navigator.userAgent,page_title:this.page_title(),url:e,params:e.indexOf("?")>0?n.queryToObject(e.substring(e.indexOf("?")+1,e.length)):{},referer:t,referer_params:t.indexOf("?")>0?n.queryToObject(t.substring(t.indexOf("?")+1,t.length)):{}}},i.prototype.context=function(t,e){var n;return n={},o.merge(n,this.default_context(),this.current_context(t,e)),n},i.prototype.url=function(){return window.location.href},i.prototype.referer=function(){return document.referrer},i.prototype.page_title=function(){return document.title},i.prototype.hostname=function(){return document.location.hostname},i.prototype.url_params=function(){return window.location.search},i.prototype.get_distinct_id_url_param=function(){var t;return(t=this.url_params().match(/\?.*trak_distinct_id\=([^&]+).*/))?decodeURIComponent(t[1]):void 0},i.prototype._channel=!1,i.prototype.channel=function(t){return this._channel||(this._channel=this.get_cookie("channel"))||(this._channel=this.hostname()||"web_site"),t&&(this._channel=t,this.set_cookie("channel",t)),this._channel},i.prototype._api_token=null,i.prototype.api_token=function(){return this._api_token},i.prototype._distinct_id=null,i.prototype.distinct_id=function(t){var e;return"number"==typeof t&&(t=t.toString()),t&&(this._distinct_id=t),this._distinct_id||(this._distinct_id=this.get_distinct_id_url_param())||(this._distinct_id=this.get_cookie("id"))||(this._distinct_id=this.generate_distinct_id()),e="localhost"===this.root_domain()?{}:{domain:this.root_domain()},r.set(this.cookie_key("id"),this._distinct_id,e),this._distinct_id},i.prototype.generate_distinct_id=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e,n;return e=16*Math.random()|0,n="x"===t?e:3&e|8,n.toString(16)})},i.prototype._root_domain=null,i.prototype.root_domain=function(t){return t||this._root_domain||(this._root_domain=this.get_root_domain()),t&&(this._root_domain=t),this._root_domain},i.prototype.get_root_domain=function(){var t,e;if(this.hostname().match(/[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$/i)||"localhost"===this.hostname())return this.hostname();for(e=this.hostname().split("."),t=e.pop();e.length>0&&!this.can_set_cookie({domain:t});)t=""+e.pop()+"."+t;return t},i.prototype.set_cookie=function(t,e){return r.set(this.cookie_key(t),e)},i.prototype.get_cookie=function(t){return r.get(this.cookie_key(t))},i.prototype.can_set_cookie=function(t){return r.set(this.cookie_key("foo"),""),r.set(this.cookie_key("foo"),"",t),r.set(this.cookie_key("foo"),"bar",t),"bar"===r.get(this.cookie_key("foo"))},i.prototype.cookie_key=function(t){return"_trak_"+this.api_token()+"_"+t},i.prototype.sort_arguments=function(t,e){var n,r,o,i,a;for(t=Array.prototype.slice.call(t),n=[],o=t.shift(),i=0,a=e.length;a>i;i++)r=e[i],r===typeof o?(n.push(o),o=t.shift()):n.push(null);return n},i}()}),define("trak.io",["trak","lodash","cookie"],function(t,e,n){var r,o,i,a;if(!window.trak||!window.trak.loaded){for(a=new t,i=window.trak,window.trak=a;i&&i.length>0;)r=i.shift(),o=r.shift(),a.io[o]&&a.io[o].apply(a.io,r);return n.defaults.expires=3650,n.defaults.path="/"}}),require(["trak.io"])
}();