var requirejs,require,define;(function(t){function e(t,e){return g.call(t,e)}function n(t,e){var n,r,o,i,a,s,u,c,p,f,l=e&&e.split("/"),d=h.map,_=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(l=l.slice(0,l.length-1),t=l.concat(t.split("/")),c=0;t.length>c;c+=1)if(f=t[c],"."===f)t.splice(c,1),c-=1;else if(".."===f){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((l||_)&&d){for(n=t.split("/"),c=n.length;c>0;c-=1){if(r=n.slice(0,c).join("/"),l)for(p=l.length;p>0;p-=1)if(o=d[l.slice(0,p).join("/")],o&&(o=o[r])){i=o,a=c;break}if(i)break;!s&&_&&_[r]&&(s=_[r],u=c)}!i&&s&&(i=s,a=u),i&&(n.splice(0,a,i),t=n.join("/"))}return t}function r(e,n){return function(){return p.apply(t,v.call(arguments,0).concat([e,n]))}}function o(t){return function(e){return n(e,t)}}function i(t){return function(e){d[t]=e}}function a(n){if(e(_,n)){var r=_[n];delete _[n],y[n]=!0,c.apply(t,r)}if(!e(d,n)&&!e(y,n))throw Error("No "+n);return d[n]}function s(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function u(t){return function(){return h&&h.config&&h.config[t]||{}}}var c,p,f,l,d={},_={},h={},y={},g=Object.prototype.hasOwnProperty,v=[].slice;f=function(t,e){var r,i=s(t),u=i[0];return t=i[1],u&&(u=n(u,e),r=a(u)),u?t=r&&r.normalize?r.normalize(t,o(e)):n(t,e):(t=n(t,e),i=s(t),u=i[0],t=i[1],u&&(r=a(u))),{f:u?u+"!"+t:t,n:t,pr:u,p:r}},l={require:function(t){return r(t)},exports:function(t){var e=d[t];return e!==void 0?e:d[t]={}},module:function(t){return{id:t,uri:"",exports:d[t],config:u(t)}}},c=function(n,o,s,u){var c,p,h,g,v,x,m=[];if(u=u||n,"function"==typeof s){for(o=!o.length&&s.length?["require","exports","module"]:o,v=0;o.length>v;v+=1)if(g=f(o[v],u),p=g.f,"require"===p)m[v]=l.require(n);else if("exports"===p)m[v]=l.exports(n),x=!0;else if("module"===p)c=m[v]=l.module(n);else if(e(d,p)||e(_,p)||e(y,p))m[v]=a(p);else{if(!g.p)throw Error(n+" missing "+p);g.p.load(g.n,r(u,!0),i(p),{}),m[v]=d[p]}h=s.apply(d[n],m),n&&(c&&c.exports!==t&&c.exports!==d[n]?d[n]=c.exports:h===t&&x||(d[n]=h))}else n&&(d[n]=s)},requirejs=require=p=function(e,n,r,o,i){return"string"==typeof e?l[e]?l[e](n):a(f(e,n).f):(e.splice||(h=e,n.splice?(e=n,n=r,r=null):e=t),n=n||function(){},"function"==typeof r&&(r=o,o=i),o?c(t,e,n,r):setTimeout(function(){c(t,e,n,r)},4),p)},p.config=function(t){return h=t,h.deps&&p(h.deps,h.callback),p},define=function(t,n,r){n.splice||(r=n,n=[]),e(d,t)||e(_,t)||(_[t]=[t,n,r])},define.amd={jQuery:!0}})(),define("../components/almond/almond",function(){});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exception",[],function(){var t;return t=function(t){function e(t,e,n,r){this.message=t,this.code=e,this.details=n,this.data=r}return __extends(e,t),e}(Error)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/data_object_invalid_json",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/duplicated_distinct_ids",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/internal_service_error",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/invalid_token",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/missing_parameter",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/person_not_found",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/properties_object_invalid",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/route_not_found",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/timeout",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)}),define("exceptions/unknown",["exception"],function(){var t;return t=function(){function t(t,e,n,r){this.message=t,this.code=e,this.details=n,this.data=r}return t}()}),define("exceptions",["exception","exceptions/data_object_invalid_json","exceptions/duplicated_distinct_ids","exceptions/internal_service_error","exceptions/invalid_token","exceptions/missing_parameter","exceptions/person_not_found","exceptions/properties_object_invalid","exceptions/route_not_found","exceptions/timeout","exceptions/unknown"],function(t,e,n,r,o,i,a,s,u,c,p){return{Exception:t,DataObjectInvalidJson:e,DuplicatedDistinctIds:n,InternalServiceError:r,InvalidToken:o,MissingParameter:i,PersonNotFound:a,PropertiesObjectInvalid:s,RouteNotFound:u,Timeout:c,Unknown:p}}),"object"!=typeof JSON&&(JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,o,i,a,s=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?u+"":"null";case"boolean":case"null":return u+"";case"object":if(!u)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(u)){for(i=u.length,n=0;i>n;n+=1)a[n]=str(n,u)||"null";return o=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,u),o&&a.push(quote(r)+(gap?": ":":")+o));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(o=str(r,u),o&&a.push(quote(r)+(gap?": ":":")+o));return o=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(t,e,o)}var j;if(text+="",cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json2",function(t){return function(){var e;return e||t.JSON}}(this)),define("jsonp",["exceptions","json2"],function(t,e){var n;return n=function(){function n(){}return n.prototype.count=0,n.prototype.call=function(t,e,n){return this.jsonp(this.url(t,e),n)},n.prototype.url=function(t,e){return trak.io.protocol()+trak.io.host()+"/"+t+this.params(t,e)},n.prototype.params=function(t,n){var r,o,i,a;i=this.default_params(t),_.merge(i,n,function(t,e){return _.isArray(t)?_.uniq(t.concat(e)):void 0}),r=[];for(o in i)a=i[o],(_.isArray(a)||_.isObject(a))&&(a=e.stringify(a)),r.push(o+"="+encodeURIComponent(a));return"?"+r.join("&")},n.prototype.default_params=function(t){switch(t){case"identify":return{token:trak.io.api_token(),data:{distinct_id:trak.io.distinct_id(),properties:{}}};case"alias":return{token:trak.io.api_token(),data:{distinct_id:trak.io.distinct_id()}};case"track":return{token:trak.io.api_token(),data:{distinct_id:trak.io.distinct_id(),properties:{},channel:trak.io.channel(),context:trak.io.context()}};default:return{}}},n.prototype.callback=function(e,n){var r;if(!e||!e.status||"success"!==e.status)throw e.exception&&(r=t[e.exception.match(/\:\:([a-zA-Z0-9]+)$/)[1]])?new r(e.message,e.code,e.details,e):new t.Unknown(e.message,e.code,e.details,e);return n?n(e):void 0},n.prototype.noop=function(){},n.prototype.jsonp=function(t,e){var n,r,o,i,a,s,u;return s=1e4,a=document.getElementsByTagName("script")[0],r=this.count++,o=this,s&&(u=setTimeout(function(){return n(),o.callback({status:"error",exception:"TrakioAPI::Exceptions::Timeout",message:"The server failed to respond in time."})},s)),n=function(){return i.parentNode.removeChild(i),window["__trak"+r]=this.noop},o=this,window["__trak"+r]=function(t){return u&&clearTimeout(u),n(),o.callback(t,e)},t+=(~t.indexOf("?")?"&":"?")+"callback="+encodeURIComponent("__trak"+r),t=t.replace("?&","?"),i=document.createElement("script"),i.src=t,a.parentNode.insertBefore(i,a)},n}()}),function(t){function e(){}function n(){for(var t,n={shadowedProps:P,arrays:"isArray(iterable)",bottom:"",init:"iterable",loop:"",top:"",useHas:!0,useKeys:!!te},r=0;t=arguments[r];r++)for(var o in t)n[o]=t[o];var s=n.args;n.firstArg=/^[^,]+/.exec(s)[0];var u=Function("hasOwnProperty, isArguments, isArray, isString, keys, lodash, objectTypes","return function("+s+") {\n"+Z(n)+"\n}");return u(H,i,a,f,te,e,M)}function r(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function o(t){var e=!1;if(!t||z.call(t)!=q||!Q.argsClass&&i(t))return e;var n=t.constructor;return(c(n)?n instanceof n:Q.nodeClass||!r(t))?Q.ownLast?(ne(t,function(t,n,r){return e=H.call(r,n),!1}),e===!0):(ne(t,function(t,n){e=n}),e===!1||H.call(t,e)):e}function i(t){return z.call(t)==S}function a(t){return Q.argsObject&&t instanceof Array||(B?B(t):z.call(t)==A)}function s(t){return t===!0||t===!1||z.call(t)==E}function u(t,n,o,a,s,p){var f=o===k;if("function"==typeof o&&!f){o=e.createCallback(o,a,2);var l=o(t,n);if(l!==undefined)return!!l}if(t===n)return 0!==t||1/t==1/n;var d=typeof t,_=typeof n;if(t===t&&(!t||"function"!=d&&"object"!=d)&&(!n||"function"!=_&&"object"!=_))return!1;if(null==t||null==n)return t===n;var h=z.call(t),y=z.call(n);if(h==S&&(h=q),y==S&&(y=q),h!=y)return!1;switch(h){case E:case C:return+t==+n;case N:return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case I:case J:return t==n+""}var g=h==A;if(!g){if(H.call(t,"__wrapped__ ")||H.call(n,"__wrapped__"))return u(t.__wrapped__||t,n.__wrapped__||n,o,a,s,p);if(h!=q||!Q.nodeClass&&(r(t)||r(n)))return!1;var v=!Q.argsObject&&i(t)?Object:t.constructor,x=!Q.argsObject&&i(n)?Object:n.constructor;if(v!=x&&!(c(v)&&v instanceof v&&c(x)&&x instanceof x))return!1}s||(s=[]),p||(p=[]);for(var m=s.length;m--;)if(s[m]==t)return p[m]==n;var b=0;if(l=!0,s.push(t),p.push(n),g){if(m=t.length,b=n.length,l=b==t.length,!l&&!f)return l;for(;b--;){var w=m,j=n[b];if(f)for(;w--&&!(l=u(t[w],j,o,a,s,p)););else if(!(l=u(t[b],j,o,a,s,p)))break}return l}return ne(n,function(e,n,r){return H.call(r,n)?(b++,l=H.call(t,n)&&u(t[n],e,o,a,s,p)):undefined}),l&&!f&&ne(t,function(t,e,n){return H.call(n,e)?l=--b>-1:undefined}),l}function c(t){return"function"==typeof t}function p(t){return t?M[typeof t]:!1}function f(t){return"string"==typeof t||z.call(t)==J}function l(t){return t===undefined}function d(t,n,r){var o=arguments,i=0,s=2;if(!p(t))return t;if(r===k)var u=o[3],c=o[4],f=o[5];else c=[],f=[],"number"!=typeof r&&(s=o.length),s>3&&"function"==typeof o[s-2]?u=e.createCallback(o[--s-1],o[s--],2):s>2&&"function"==typeof o[s-1]&&(u=o[--s]);for(;s>++i;)(a(o[i])?_:re)(o[i],function(e,n){var r,o,i=e,s=t[n];if(e&&((o=a(e))||oe(e))){for(var p=c.length;p--;)if(r=c[p]==e){s=f[p];break}if(!r){var l;u&&(i=u(s,e),(l=i!==undefined)&&(s=i)),l||(s=o?a(s)?s:[]:oe(s)?s:{}),c.push(e),f.push(s),l||(s=d(s,e,k,u,c,f))}}else u&&(i=u(s,e),i===undefined&&(i=e)),i!==undefined&&(s=i);t[n]=s});return t}function _(t,e,n){if(e&&n===undefined&&a(t))for(var r=-1,o=t.length;o>++r&&e(t[r],r,t)!==!1;);else ee(t,e,n);return t}function h(t,e,n){var r=-1,o=t?t.length:0;if("number"==typeof n)r=(0>n?K(0,o+n):n||0)-1;else if(n)return r=y(t,e),t[r]===e?r:-1;for(;o>++r;)if(t[r]===e)return r;return-1}function y(t,n,r,o){var i=0,a=t?t.length:i;for(r=r?e.createCallback(r,o,1):x,n=r(n);a>i;){var s=i+a>>>1;n>r(t[s])?i=s+1:a=s}return i}function g(t,n,r,o){var i=-1,a=t?t.length:0,s=[],u=s;"boolean"!=typeof n&&null!=n&&(o=r,r=n,n=!1);var c=!n&&a>=O;if(c)var p={};for(null!=r&&(u=[],r=e.createCallback(r,o));a>++i;){var f=t[i],l=r?r(f,i,t):f;if(c)var d=j+l,_=p[d]?!(u=p[d]):u=p[d]=[];(n?!i||u[u.length-1]!==l:_||0>h(u,l))&&((r||c)&&u.push(l),s.push(f))}return s}function v(t,e,n){if(null==t)return x;var r=typeof t;if("function"!=r){if("object"!=r)return function(e){return e[t]};var o=te(t);return function(e){for(var n=o.length,r=!1;n--&&(r=u(e[o[n]],t[o[n]],k)););return r}}return e!==undefined?1===n?function(n){return t.call(e,n)}:2===n?function(n,r){return t.call(e,n,r)}:4===n?function(n,r,o,i){return t.call(e,n,r,o,i)}:function(n,r,o){return t.call(e,n,r,o)}:t}function x(t){return t}var m="object"==typeof exports&&exports,b="object"==typeof module&&module&&module.exports==m&&module,w="object"==typeof global&&global;(w.global===w||w.window===w)&&(t=w);var k={},j=+new Date+"",O=200,P=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],S="[object Arguments]",A="[object Array]",E="[object Boolean]",C="[object Date]",T="[object Function]",N="[object Number]",q="[object Object]",I="[object RegExp]",J="[object String]",M={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},U=[],D={};t._;var R=RegExp("^"+(D.valueOf+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),F=(Math.ceil,t.clearTimeout,U.concat,Math.floor,R.test(F=Object.getPrototypeOf)&&F),H=D.hasOwnProperty,z=(U.push,t.setTimeout,D.toString),L=R.test(L=z.bind)&&L,B=R.test(B=Array.isArray)&&B,$=(t.isFinite,t.isNaN,R.test($=Object.keys)&&$),K=Math.max;Math.min,Math.random,U.slice;var Y=R.test(t.attachEvent),G=L&&!/\n|true/.test(L+Y),Q=e.support={};(function(){var t=function(){this.x=1},e=[];t.prototype={valueOf:1,y:1};for(var n in new t)e.push(n);for(n in arguments);Q.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),Q.argsClass=i(arguments),Q.enumPrototypes=t.propertyIsEnumerable("prototype"),Q.fastBind=L&&!G,Q.ownLast="x"!=e[0],Q.nonEnumArgs=0!=n,Q.nonEnumShadows=!/valueOf/.test(e),Q.unindexedChars="xx"!="x"[0]+Object("x")[0];try{Q.nodeClass=!(z.call(document)==q&&!({toString:0}+""))}catch(r){Q.nodeClass=!0}})(1);var Z=function(t){var e="var index, iterable = "+t.firstArg+", result = "+t.init+";\nif (!iterable) return result;\n"+t.top+";\n";if(t.arrays?(e+="var length = iterable.length; index = -1;\nif ("+t.arrays+") {  ",Q.unindexedChars&&(e+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),e+="\n  while (++index < length) {\n    "+t.loop+"\n  }\n}\nelse {  "):Q.nonEnumArgs&&(e+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+t.loop+"\n    }\n  } else {  "),Q.enumPrototypes&&(e+="\n  var skipProto = typeof iterable == 'function';\n  "),t.useHas&&t.useKeys)e+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] ? keys(iterable) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    ",Q.enumPrototypes&&(e+="if (!(skipProto && index == 'prototype')) {\n  "),e+=t.loop,Q.enumPrototypes&&(e+="}\n"),e+="  }  ";else if(e+="\n  for (index in iterable) {",(Q.enumPrototypes||t.useHas)&&(e+="\n    if (",Q.enumPrototypes&&(e+="!(skipProto && index == 'prototype')"),Q.enumPrototypes&&t.useHas&&(e+=" && "),t.useHas&&(e+="hasOwnProperty.call(iterable, index)"),e+=") {    "),e+=t.loop+";    ",(Q.enumPrototypes||t.useHas)&&(e+="\n    }"),e+="\n  }    ",Q.nonEnumShadows){e+="\n\n  var ctor = iterable.constructor;\n      ";for(var n=0;7>n;n++)e+="\n  index = '"+t.shadowedProps[n]+"';\n  if (","constructor"==t.shadowedProps[n]&&(e+="!(ctor && ctor.prototype === iterable) && "),e+="hasOwnProperty.call(iterable, index)) {\n    "+t.loop+"\n  }      "}return(t.arrays||Q.nonEnumArgs)&&(e+="\n}"),e+=t.bottom+";\nreturn result"},V={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : lodash.createCallback(callback, thisArg)",arrays:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},W={top:"if (!objectTypes[typeof iterable]) return result;\n"+V.top,arrays:!1};Q.argsClass||(i=function(t){return t?H.call(t,"callee"):!1});var X=n({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)",arrays:!1}),te=$?function(t){return p(t)?Q.enumPrototypes&&"function"==typeof t||Q.nonEnumArgs&&t.length&&i(t)?X(t):$(t):[]}:X,ee=n(V),ne=n(V,W,{useHas:!1}),re=n(V,W);c(/x/)&&(c=function(t){return t instanceof Function||z.call(t)==T});var oe=F?function(t){if(!t||z.call(t)!=q||!Q.argsClass&&i(t))return!1;var e=t.valueOf,n="function"==typeof e&&(n=F(e))&&F(n);return n?t==n||F(t)==n:o(t)}:o;e.createCallback=v,e.forEach=_,e.forIn=ne,e.forOwn=re,e.keys=te,e.merge=d,e.uniq=g,e.each=_,e.unique=g,e.identity=x,e.indexOf=h,e.isArguments=i,e.isArray=a,e.isBoolean=s,e.isEqual=u,e.isFunction=c,e.isObject=p,e.isPlainObject=oe,e.isString=f,e.isUndefined=l,e.sortedIndex=y,e.VERSION="1.2.0","function"==typeof define&&"object"==typeof define.amd&&define.amd?(t._=e,define("lodash",[],function(){return e})):m&&!m.nodeType?b?(b.exports=e)._=e:m._=e:t._=e}(this),define("io-query",["lodash"],function(){var t={};return{objectToQuery:function(e){var n=encodeURIComponent,r=[];for(var o in e){var i=e[o];if(i!=t[o]){var a=n(o)+"=";if(_.isArray(i))for(var s=0,u=i.length;u>s;++s)r.push(a+n(i[s]));else r.push(a+n(i))}}return r.join("&")},queryToObject:function(t){for(var e,n,r,o=decodeURIComponent,i=t.split("&"),a={},s=0,u=i.length;u>s;++s)if(r=i[s],r.length){var c=r.indexOf("=");0>c?(e=o(r),n=""):(e=o(r.slice(0,c)),n=o(r.slice(c+1))),"string"==typeof a[e]&&(a[e]=[a[e]]),_.isArray(a[e])?a[e].push(n):a[e]=n}return a}}}),!function(t,e){var n=function(){return n.get.apply(n,arguments)},r=n.utils={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isPlainObject:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)},toArray:function(t){return Array.prototype.slice.call(t)},getKeys:Object.keys||function(t){var e=[],n="";for(n in t)t.hasOwnProperty(n)&&e.push(n);return e},escape:function(t){return(t+"").replace(/[,;"\\=\s%]/g,function(t){return encodeURIComponent(t)})},retrieve:function(t,e){return null==t?e:t}};n.defaults={},n.expiresMultiplier=86400,n.set=function(n,o,i){if(r.isPlainObject(n))for(var a in n)n.hasOwnProperty(a)&&this.set(a,n[a],o);else{i=r.isPlainObject(i)?i:{expires:i};var s=i.expires!==e?i.expires:this.defaults.expires||"",u=typeof s;"string"===u&&""!==s?s=new Date(s):"number"===u&&(s=new Date(+new Date+1e3*this.expiresMultiplier*s)),""!==s&&"toGMTString"in s&&(s=";expires="+s.toGMTString());var c=i.path||this.defaults.path;c=c?";path="+c:"";var p=i.domain||this.defaults.domain;p=p?";domain="+p:"";var f=i.secure||this.defaults.secure?";secure":"";t.cookie=r.escape(n)+"="+r.escape(o)+s+c+p+f}return this},n.remove=function(t){t=r.isArray(t)?t:r.toArray(arguments);for(var e=0,n=t.length;n>e;e++)this.set(t[e],"",-1);return this},n.empty=function(){return this.remove(r.getKeys(this.all()))},n.get=function(t,n){n=n||e;var o=this.all();if(r.isArray(t)){for(var i={},a=0,s=t.length;s>a;a++){var u=t[a];i[u]=r.retrieve(o[u],n)}return i}return r.retrieve(o[t],n)},n.all=function(){if(""===t.cookie)return{};for(var e=t.cookie.split("; "),n={},r=0,o=e.length;o>r;r++){var i=e[r].split("=");n[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return n},n.enabled=function(){if(navigator.cookieEnabled)return!0;var t="_"===n.set("_","_").get("_");return n.remove("_"),t},"function"==typeof define&&define.amd?define("cookie",[],function(){return n}):"undefined"!=typeof exports?exports.cookie=n:window.cookie=n}(document),define("trak",["jsonp","exceptions","io-query","cookie","lodash"],function(t,e,n,r,o){var i;return i=function(){function i(){this.io=this}return i.prototype.loaded=!0,i.prototype.initialize=function(t,e){var n;return this._api_token=t,null==e&&(e={}),this.protocol(e.protocol),e.host&&this.host(e.host),e.context&&this.context(e.context),e.channel&&this.channel(e.channel),this.distinct_id(e.distinct_id||null),e.auto_track_page_views!==!1?(n=this,this.page_ready(function(){return n.page_view()})):void 0},i.prototype.initialise=function(){return this.initialize.apply(this,arguments)},i.prototype.page_ready_event_fired=!1,i.prototype.page_ready=function(t){var e,n,r;if(n=function(){return this.page_ready_event_fired?void 0:(this.page_ready_event_fired=!0,t())},e=function(){if(!this.page_ready_event_fired){try{document.documentElement.doScroll("left")}catch(t){return setTimeout(e,1),void 0}return n()}},"complete"===document.readyState)return n();if(document.addEventListener)return document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);if(document.attachEvent){document.attachEvent("onreadystatechange",n),window.attachEvent("onload",n),r=!1;try{r=null==window.frameElement}catch(o){}if(document.documentElement.doScroll&&r)return e()}},i.prototype.jsonp=new t,i.prototype.call=function(){return this.jsonp.call.apply(this.jsonp,arguments)},i.prototype.identify=function(){var t,e,n,r;return t=this.sort_arguments(arguments,["string","object","function"]),n=t[0]||this.distinct_id(),r=t[1]||{},e=t[2]||null,this.distinct_id(n),this.call("identify",{distinct_id:n,data:{properties:r}},e),null},i.prototype.alias=function(){var t,n,r,o,i;if(n=this.sort_arguments(arguments,["string","string","boolean","function"]),o=(n[1]?n[0]:void 0)||this.distinct_id(),t=n[1]?n[1]:n[0],i=null!==n[2]?n[2]:n[1]?!1:!0,r=n[3]||null,!t)throw new e.MissingParameter("Missing a required parameter.",400,"You must provide an alias, see http://docs.trak.io/alias.html");return this.call("alias",{data:{distinct_id:o,alias:t}},r),i&&this.distinct_id(t),null},i.prototype.track=function(){var t,n,r,i,a,s,u;if(t=this.sort_arguments(arguments,["string","string","string","object","object","function"]),a=(t[2]?arguments[0]:void 0)||this.distinct_id(),s=t[2]?t[1]:t[0],r=(t[2]?t[2]:t[1])||this.channel(),u=t[3]||{},i=t[4]||{},i=o.merge(i,this.context()),n=t[5]||null,!s)throw new e.MissingParameter("Missing a required parameter.",400,"You must provide an event to track, see http://docs.trak.io/track.html");return this.call("track",{data:{distinct_id:a,event:s,channel:r,context:i,properties:u}},n),null},i.prototype.page_view=function(){var t,e,n,r;return t=this.sort_arguments(arguments,["string","string","function"]),r=t[0]||this.url(),n=t[1]||this.page_title(),e=t[2]||null,this.track("page_view",{url:r,page_title:n},e)},i.prototype._protocol="https",i.prototype.protocol=function(t){return t&&(this._protocol=t),""+this._protocol+"://"},i.prototype._host="api.trak.io/v1",i.prototype.host=function(t){return t&&(this._host=t),this._host},i.prototype._current_context=!1,i.prototype.current_context=function(t,e){var n;return this._current_context||(this._current_context=(n=this.get_cookie("context"))?JSON.parse(n):{}),"object"==typeof t?o.merge(this._current_context,t):t&&e&&(this._current_context[t]=e),this.set_cookie("context",JSON.stringify(this._current_context)),this._current_context},i.prototype.default_context=function(){var t,e;return e=this.url(),t=this.referer(),{ip:null,user_agent:navigator.userAgent,page_title:this.page_title(),url:e,params:e.indexOf("?")>0?n.queryToObject(e.substring(e.indexOf("?")+1,e.length)):{},referer:t,referer_params:t.indexOf("?")>0?n.queryToObject(t.substring(t.indexOf("?")+1,t.length)):{}}},i.prototype.context=function(t,e){var n;return n={},o.merge(n,this.default_context(),this.current_context(t,e)),n},i.prototype.url=function(){return window.location.href},i.prototype.referer=function(){return document.referrer},i.prototype.page_title=function(){return document.title},i.prototype.url_params=function(){return window.location.search},i.prototype.get_distinct_id_url_param=function(){var t;return(t=this.url_params().match(/\?.*trak_distinct_id\=([^&]+).*/))?decodeURIComponent(t[1]):void 0},i.prototype._channel=!1,i.prototype.channel=function(t){return this._channel||(this._channel=this.get_cookie("channel"))||(this._channel=document.location.hostname||"web_site"),t&&(this._channel=t,this.set_cookie("channel",t)),this._channel},i.prototype._api_token=null,i.prototype.api_token=function(){return this._api_token},i.prototype._distinct_id=null,i.prototype.distinct_id=function(t){return t&&(this._distinct_id=t),this._distinct_id||(this._distinct_id=this.get_distinct_id_url_param())||(this._distinct_id=this.get_cookie("id"))||(this._distinct_id=this.generate_distinct_id()),r.set(this.cookie_key("id"),this._distinct_id,{domain:this.get_root_domain()}),this._distinct_id},i.prototype.generate_distinct_id=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e,n;return e=0|16*Math.random(),n="x"===t?e:8|3&e,n.toString(16)})},i.prototype.get_root_domain=function(){var t;return(t=document.location.hostname.match(/[a-z0-9]+\.[a-z0-9]+$/i))?"."+t[0]:void 0},i.prototype.set_cookie=function(t,e){return r.set(this.cookie_key(t),e)},i.prototype.get_cookie=function(t){return r.get(this.cookie_key(t))},i.prototype.cookie_key=function(t){return"_trak_"+this.api_token()+"_"+t},i.prototype.sort_arguments=function(t,e){var n,r,o,i,a;for(t=Array.prototype.slice.call(t),n=[],o=t.shift(),i=0,a=e.length;a>i;i++)r=e[i],r===typeof o?(n.push(o),o=t.shift()):n.push(null);return n},i}()}),define("trak.io",["trak","lodash","cookie"],function(t,e,n){var r,o,i,a;if(!window.trak||!window.trak.loaded){for(a=new t,i=window.trak,window.trak=a;i&&i.length>0;)r=i.shift(),o=r.shift(),a.io[o]&&a.io[o].apply(a.io,r);return n.defaults.expires=3650,n.defaults.path="/",window.cookie=n}}),require(["trak.io"]);