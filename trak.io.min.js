!function(){var requirejs,require,define;!function(t){function e(t,e){return g.call(t,e)}function n(t,e){var n,r,o,i,s,a,u,c,p,f,l,_=e&&e.split("/"),d=h.map,y=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(_=_.slice(0,_.length-1),t=t.split("/"),s=t.length-1,h.nodeIdCompat&&v.test(t[s])&&(t[s]=t[s].replace(v,"")),t=_.concat(t),p=0;p<t.length;p+=1)if(l=t[p],"."===l)t.splice(p,1),p-=1;else if(".."===l){if(1===p&&(".."===t[2]||".."===t[0]))break;p>0&&(t.splice(p-1,2),p-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((_||y)&&d){for(n=t.split("/"),p=n.length;p>0;p-=1){if(r=n.slice(0,p).join("/"),_)for(f=_.length;f>0;f-=1)if(o=d[_.slice(0,f).join("/")],o&&(o=o[r])){i=o,a=p;break}if(i)break;!u&&y&&y[r]&&(u=y[r],c=p)}!i&&u&&(i=u,a=c),i&&(n.splice(0,a,i),t=n.join("/"))}return t}function r(e,n){return function(){return p.apply(t,m.call(arguments,0).concat([e,n]))}}function o(t){return function(e){return n(e,t)}}function i(t){return function(e){_[t]=e}}function s(n){if(e(d,n)){var r=d[n];delete d[n],y[n]=!0,c.apply(t,r)}if(!e(_,n)&&!e(y,n))throw new Error("No "+n);return _[n]}function a(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function u(t){return function(){return h&&h.config&&h.config[t]||{}}}var c,p,f,l,_={},d={},h={},y={},g=Object.prototype.hasOwnProperty,m=[].slice,v=/\.js$/;f=function(t,e){var r,i=a(t),u=i[0];return t=i[1],u&&(u=n(u,e),r=s(u)),u?t=r&&r.normalize?r.normalize(t,o(e)):n(t,e):(t=n(t,e),i=a(t),u=i[0],t=i[1],u&&(r=s(u))),{f:u?u+"!"+t:t,n:t,pr:u,p:r}},l={require:function(t){return r(t)},exports:function(t){var e=_[t];return"undefined"!=typeof e?e:_[t]={}},module:function(t){return{id:t,uri:"",exports:_[t],config:u(t)}}},c=function(n,o,a,u){var c,p,h,g,m,v,x=[],b=typeof a;if(u=u||n,"undefined"===b||"function"===b){for(o=!o.length&&a.length?["require","exports","module"]:o,m=0;m<o.length;m+=1)if(g=f(o[m],u),p=g.f,"require"===p)x[m]=l.require(n);else if("exports"===p)x[m]=l.exports(n),v=!0;else if("module"===p)c=x[m]=l.module(n);else if(e(_,p)||e(d,p)||e(y,p))x[m]=s(p);else{if(!g.p)throw new Error(n+" missing "+p);g.p.load(g.n,r(u,!0),i(p),{}),x[m]=_[p]}h=a?a.apply(_[n],x):void 0,n&&(c&&c.exports!==t&&c.exports!==_[n]?_[n]=c.exports:h===t&&v||(_[n]=h))}else n&&(_[n]=a)},requirejs=require=p=function(e,n,r,o,i){if("string"==typeof e)return l[e]?l[e](n):s(f(e,n).f);if(!e.splice){if(h=e,h.deps&&p(h.deps,h.callback),!n)return;n.splice?(e=n,n=r,r=null):e=t}return n=n||function(){},"function"==typeof r&&(r=o,o=i),o?c(t,e,n,r):setTimeout(function(){c(t,e,n,r)},4),p},p.config=function(t){return p(t)},requirejs._defined=_,define=function(t,n,r){n.splice||(r=n,n=[]),e(_,t)||e(d,t)||(d[t]=[t,n,r])},define.amd={jQuery:!0}}(),define("../bower_components/almond/almond",function(){});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exception",[],function(){var t;return t=function(t){function e(t,e,n,r){this.message=t,this.code=e,this.details=n,this.data=r}return __extends(e,t),e}(Error)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/data_object_invalid_json",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/duplicated_distinct_ids",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/internal_service_error",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/invalid_token",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/missing_parameter",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/person_not_found",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/properties_object_invalid",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/revenue_property_invalid",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/route_not_found",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)});var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define("exceptions/timeout",["exception"],function(t){var e;return e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,t),e}(t)}),define("exceptions/unknown",["exception"],function(){var t;return t=function(){function t(t,e,n,r){this.message=t,this.code=e,this.details=n,this.data=r}return t}()}),define("exceptions",["exception","exceptions/data_object_invalid_json","exceptions/duplicated_distinct_ids","exceptions/internal_service_error","exceptions/invalid_token","exceptions/missing_parameter","exceptions/person_not_found","exceptions/properties_object_invalid","exceptions/revenue_property_invalid","exceptions/route_not_found","exceptions/timeout","exceptions/unknown"],function(t,e,n,r,o,i,s,a,u,c,p,f){return{Exception:t,DataObjectInvalidJson:e,DuplicatedDistinctIds:n,InternalServiceError:r,InvalidToken:o,MissingParameter:i,PersonNotFound:s,PropertiesObjectInvalid:a,RevenuePropertyInvalid:u,RouteNotFound:c,Timeout:p,Unknown:f}}),"object"!=typeof JSON&&(JSON={}),function(){function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,o,i,s,a=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(u)){for(i=u.length,n=0;i>n;n+=1)s[n]=str(n,u)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(i=rep.length,n=0;i>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],o=str(r,u),o&&s.push(quote(r)+(gap?": ":":")+o));else for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(o=str(r,u),o&&s.push(quote(r)+(gap?": ":":")+o));return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(t,e){var n,r,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(r=walk(o,n),void 0!==r?o[n]=r:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json2",function(t){return function(){var e;return e||t.JSON}}(this)),function(t){function e(){return o.pop()||[]}function n(t){t.length=0,o.length<f&&o.push(t)}function r(r){function o(){}function i(){for(var t,e={shadowedProps:_,arrays:"isArray(iterable)",bottom:"",init:"iterable",loop:"",top:"",useHas:!0,useKeys:!!de},n=0;t=arguments[n];n++)for(var r in t)e[r]=t[r];var i=e.args;e.firstArg=/^[^,]+/.exec(i)[0];var s=Function("hasOwnProperty, isArguments, isArray, isString, keys, lodash, objectTypes","return function("+i+") {\n"+pe(e)+"\n}");return s(ee,S,A,N,de,o,w)}function s(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function a(t){var e=!1;if(!t||ne.call(t)!=x||!ce.argsClass&&S(t))return e;var n=t.constructor;return(T(n)?n instanceof n:ce.nodeClass||!s(t))?ce.ownLast?(ye(t,function(t,n,r){return e=ee.call(r,n),!1}),e===!0):(ye(t,function(t,n){e=n}),e===!1||ee.call(t,e)):e}function f(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,o=n-e||0,i=Array(0>o?0:o);++r<o;)i[r]=t[e+r];return i}function S(t){return ne.call(t)==d}function A(t){return ce.argsObject&&t instanceof Array||(oe?oe(t):ne.call(t)==h)}function C(t){return t===!0||t===!1||ne.call(t)==y}function E(t,e,n,r,i,a){var c=n===u;if("function"==typeof n&&!c){n=o.createCallback(n,r,2);var p=n(t,e);if("undefined"!=typeof p)return!!p}if(t===e)return 0!==t||1/t==1/e;var f=typeof t,l=typeof e;if(t===t&&(!t||"function"!=f&&"object"!=f)&&(!e||"function"!=l&&"object"!=l))return!1;if(null==t||null==e)return t===e;var _=ne.call(t),m=ne.call(e);if(_==d&&(_=x),m==d&&(m=x),_!=m)return!1;switch(_){case y:case g:return+t==+e;case v:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case b:case k:return t==String(e)}var w=_==h;if(!w){if(ee.call(t,"__wrapped__ ")||ee.call(e,"__wrapped__"))return E(t.__wrapped__||t,e.__wrapped__||e,n,r,i,a);if(_!=x||!ce.nodeClass&&(s(t)||s(e)))return!1;var j=!ce.argsObject&&S(t)?Object:t.constructor,O=!ce.argsObject&&S(e)?Object:e.constructor;if(j!=O&&!(T(j)&&j instanceof j&&T(O)&&O instanceof O))return!1}i||(i=[]),a||(a=[]);for(var P=i.length;P--;)if(i[P]==t)return a[P]==e;var A=0;if(p=!0,i.push(t),a.push(e),w){if(P=t.length,A=e.length,p=A==t.length,!p&&!c)return p;for(;A--;){var C=P,I=e[A];if(c)for(;C--&&!(p=E(t[C],I,n,r,i,a)););else if(!(p=E(t[A],I,n,r,i,a)))break}return p}return ye(e,function(e,o,s){return ee.call(s,o)?(A++,p=ee.call(t,o)&&E(t[o],e,n,r,i,a)):void 0}),p&&!c&&ye(t,function(t,e,n){return ee.call(n,e)?p=--A>-1:void 0}),p}function T(t){return"function"==typeof t}function I(t){return t?w[typeof t]:!1}function N(t){return"string"==typeof t||ne.call(t)==k}function q(t){return"undefined"==typeof t}function J(t,e,n){var r=arguments,i=0,s=2;if(!I(t))return t;if(n===u)var a=r[3],c=r[4],p=r[5];else c=[],p=[],"number"!=typeof n&&(s=r.length),s>3&&"function"==typeof r[s-2]?a=o.createCallback(r[--s-1],r[s--],2):s>2&&"function"==typeof r[s-1]&&(a=r[--s]);for(;++i<s;)(A(r[i])?M:ge)(r[i],function(e,n){var r,o,i=e,s=t[n];if(e&&((o=A(e))||me(e))){for(var f=c.length;f--;)if(r=c[f]==e){s=p[f];break}if(!r){var l;a&&(i=a(s,e),(l="undefined"!=typeof i)&&(s=i)),l||(s=o?A(s)?s:[]:me(s)?s:{}),c.push(e),p.push(s),l||(s=J(s,e,u,a,c,p))}}else a&&(i=a(s,e),"undefined"==typeof i&&(i=e)),"undefined"!=typeof i&&(s=i);t[n]=s});return t}function M(t,e,n){if(e&&"undefined"==typeof n&&A(t))for(var r=-1,o=t.length;++r<o&&e(t[r],r,t)!==!1;);else he(t,e,n);return t}function U(t,e,n){var r=-1,o=t?t.length:0;if("number"==typeof n)r=(0>n?se(0,o+n):n||0)-1;else if(n)return r=R(t,e),t[r]===e?r:-1;for(;++r<o;)if(t[r]===e)return r;return-1}function D(t,e,n){var r=-1,o=L(),i=t?t.length:0,s=!1;return n=(0>n?se(0,i+n):n)||0,A(t)?s=o(t,e,n)>-1:"number"==typeof i?s=(N(t)?t.indexOf(e,n):o(t,e,n))>-1:ge(t,function(t){return++r>=n?!(s=t===e):void 0}),s}function R(t,e,n,r){var i=0,s=t?t.length:i;for(n=n?o.createCallback(n,r,1):Q,e=n(e);s>i;){var a=i+s>>>1;n(t[a])<e?i=a+1:s=a}return i}function F(){return r._=W,this}function B(t,e,n,r){var i=-1,s=t?t.length:0,a=[],u=a;"boolean"!=typeof e&&null!=e&&(r=n,n=e,e=!1);var f=!e&&s>=p;if(f)var l={};for(null!=n&&(u=[],n=o.createCallback(n,r));++i<s;){var _=t[i],d=n?n(_,i,t):_;if(f)var h=c+d,y=l[h]?!(u=l[h]):u=l[h]=[];(e?!i||u[u.length-1]!==d:y||U(u,d)<0)&&((n||f)&&u.push(d),a.push(_))}return a}function z(t,e,n){var r=[];e=o.createCallback(e,n,3);var i=-1,s=t?t.length:0;if("number"==typeof s)for(;++i<s;){var a=t[i];e(a,i,t)&&r.push(a)}else ge(t,function(t,n,o){e(t,n,o)&&r.push(t)});return r}function H(t,e,n){if(null==t)return Q;var r=typeof t;if("function"!=r){if("object"!=r)return function(e){return e[t]};var o=de(t);return function(e){for(var n=o.length,r=!1;n--&&(r=E(e[o[n]],t[o[n]],u)););return r}}return"undefined"!=typeof e?1===n?function(n){return t.call(e,n)}:2===n?function(n,r){return t.call(e,n,r)}:4===n?function(n,r,o,i){return t.call(e,n,r,o,i)}:function(n,r,o){return t.call(e,n,r,o)}:t}function L(){var t=(t=o.indexOf)===U?$:t;return t}function $(t,e,n){for(var r=(n||0)-1,o=t?t.length:0;++r<o;)if(t[r]===e)return r;return-1}function K(t,e,n){return Y(t,!0,"function"==typeof e&&baseCreateCallback(e,n,1))}function Y(t,r,o,i,s){if(o){var a=o(t);if("undefined"!=typeof a)return a}var u=I(t);if(!u)return t;var c=ne.call(t);if(!j[c])return t;var p=O[c];switch(c){case y:case g:return new p(+t);case v:case k:return new p(t);case b:return a=p(t.source,l.exec(t)),a.lastIndex=t.lastIndex,a}var _=A(t);if(r){var d=!i;i||(i=e()),s||(s=e());for(var h=i.length;h--;)if(i[h]==t)return s[h];a=_?p(t.length):{}}else a=_?f(t):assign({},t);return _&&(ee.call(t,"index")&&(a.index=t.index),ee.call(t,"input")&&(a.input=t.input)),r?(i.push(t),s.push(a),(_?M:ge)(t,function(t,e){a[e]=Y(t,r,o,i,s)}),d&&(n(i),n(s)),a):a}function G(t,e,n){e=o.createCallback(e,n,3);var r=-1,i=t?t.length:0;if("number"!=typeof i){var s;return ge(t,function(t,n,r){return e(t,n,r)?(s=t,!1):void 0}),s}for(;++r<i;){var a=t[r];if(e(a,r,t))return a}}function Q(t){return t}r=r?P.defaults(t.Object(),r,P.pick(t,contextProps)):t;var V=Array(),Z=Object(),W=t._,X=RegExp("^"+String(Z.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),te=(Math.ceil,t.clearTimeout,V.concat,Math.floor,X.test(te=Object.getPrototypeOf)&&te),ee=Z.hasOwnProperty,ne=(V.push,t.setTimeout,Z.toString),re=X.test(re=ne.bind)&&re,oe=X.test(oe=Array.isArray)&&oe,ie=(t.isFinite,t.isNaN,X.test(ie=Object.keys)&&ie),se=Math.max,ae=(Math.min,Math.random,V.slice,X.test(t.attachEvent)),ue=re&&!/\n|true/.test(re+ae),ce=o.support={};!function(){var t=function(){this.x=1},e=[];t.prototype={valueOf:1,y:1};for(var n in new t)e.push(n);for(n in arguments);ce.argsObject=arguments.constructor==Object&&!(arguments instanceof Array),ce.argsClass=S(arguments),ce.enumPrototypes=t.propertyIsEnumerable("prototype"),ce.fastBind=re&&!ue,ce.ownLast="x"!=e[0],ce.nonEnumArgs=0!=n,ce.nonEnumShadows=!/valueOf/.test(e),ce.unindexedChars="x"[0]+Object("x")[0]!="xx";try{ce.nodeClass=!(ne.call(document)==x&&!({toString:0}+""))}catch(r){ce.nodeClass=!0}}(1);var pe=function(t){var e="var index, iterable = "+t.firstArg+", result = "+t.init+";\nif (!iterable) return result;\n"+t.top+";\n";if(t.arrays?(e+="var length = iterable.length; index = -1;\nif ("+t.arrays+") {  ",ce.unindexedChars&&(e+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),e+="\n  while (++index < length) {\n    "+t.loop+"\n  }\n}\nelse {  "):ce.nonEnumArgs&&(e+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+t.loop+"\n    }\n  } else {  "),ce.enumPrototypes&&(e+="\n  var skipProto = typeof iterable == 'function';\n  "),t.useHas&&t.useKeys)e+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] ? keys(iterable) : [],\n      length = ownProps.length;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n    ",ce.enumPrototypes&&(e+="if (!(skipProto && index == 'prototype')) {\n  "),e+=t.loop,ce.enumPrototypes&&(e+="}\n"),e+="  }  ";else if(e+="\n  for (index in iterable) {",(ce.enumPrototypes||t.useHas)&&(e+="\n    if (",ce.enumPrototypes&&(e+="!(skipProto && index == 'prototype')"),ce.enumPrototypes&&t.useHas&&(e+=" && "),t.useHas&&(e+="hasOwnProperty.call(iterable, index)"),e+=") {    "),e+=t.loop+";    ",(ce.enumPrototypes||t.useHas)&&(e+="\n    }"),e+="\n  }    ",ce.nonEnumShadows){e+="\n\n  var ctor = iterable.constructor;\n      ";for(var n=0;7>n;n++)e+="\n  index = '"+t.shadowedProps[n]+"';\n  if (","constructor"==t.shadowedProps[n]&&(e+="!(ctor && ctor.prototype === iterable) && "),e+="hasOwnProperty.call(iterable, index)) {\n    "+t.loop+"\n  }      "}return(t.arrays||ce.nonEnumArgs)&&(e+="\n}"),e+=t.bottom+";\nreturn result"},fe={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : lodash.createCallback(callback, thisArg)",arrays:"typeof length == 'number'",loop:"if (callback(iterable[index], index, collection) === false) return result"},le={top:"if (!objectTypes[typeof iterable]) return result;\n"+fe.top,arrays:!1};ce.argsClass||(S=function(t){return t?ee.call(t,"callee"):!1});var _e=i({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)",arrays:!1}),de=ie?function(t){return I(t)?ce.enumPrototypes&&"function"==typeof t||ce.nonEnumArgs&&t.length&&S(t)?_e(t):ie(t):[]}:_e,he=i(fe),ye=i(fe,le,{useHas:!1}),ge=i(fe,le);T(/x/)&&(T=function(t){return t instanceof Function||ne.call(t)==m});var me=te?function(t){if(!t||ne.call(t)!=x||!ce.argsClass&&S(t))return!1;var e=t.valueOf,n="function"==typeof e&&(n=te(e))&&te(n);return n?t==n||te(t)==n:a(t)}:a;return o.createCallback=H,o.forEach=M,o.forIn=ye,o.forOwn=ge,o.keys=de,o.merge=J,o.uniq=B,o.each=M,o.unique=B,o.identity=Q,o.indexOf=U,o.getIndexOf=L,o.contains=D,o.filter=z,o.find=G,o.cloneDeep=K,o.baseClone=Y,o.isArguments=S,o.isArray=A,o.isBoolean=C,o.isEqual=E,o.isFunction=T,o.isObject=I,o.isPlainObject=me,o.isString=N,o.isUndefined=q,o.sortedIndex=R,o.noConflict=F,o.VERSION="1.2.0",o}var o=[],i="object"==typeof exports&&exports,s="object"==typeof module&&module&&module.exports==i&&module,a="object"==typeof global&&global;(a.global===a||a.window===a)&&(t=a);var u={},c=+new Date+"",p=200,f=40,l=/\w*$/,_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],d="[object Arguments]",h="[object Array]",y="[object Boolean]",g="[object Date]",m="[object Function]",v="[object Number]",x="[object Object]",b="[object RegExp]",k="[object String]",w={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},j={};j[m]=!1,j[d]=j[h]=j[y]=j[g]=j[v]=j[x]=j[b]=j[k]=!0;var O={};O[h]=Array,O[y]=Boolean,O[g]=Date,O[m]=Function,O[x]=Object,O[v]=Number,O[b]=RegExp,O[k]=String;var P=r();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t._=P,define("lodash",[],function(){return P})):i&&!i.nodeType?s?(s.exports=P)._=P:i._=P:t._=P}({}),define("jsonp",["exceptions","json2","lodash"],function(t,e,n){var r;return r=function(){function r(){}return r.prototype.count=0,r.prototype.call=function(t,e,n){return this.jsonp(this.url(t,e),n)},r.prototype.url=function(e,n){var r;if(!trak.io.api_token())throw r=new t.InvalidToken("Missing or invalid API token.",401,"You must provide a valid API token, see http://docs.trak.io/authentication.html."),trak.io.debug_error(r),r;return trak.io.protocol()+trak.io.host()+"/"+e+this.params(e,n)},r.prototype.params=function(t,r){var o,i,s,a;s=this.default_params(t),n.merge(s,r,function(t,e){return n.isArray(t)?n.uniq(t.concat(e)):void 0}),o=[];for(i in s)a=s[i],(n.isArray(a)||n.isObject(a))&&(a=e.stringify(a)),o.push(i+"="+encodeURIComponent(a));return"?"+o.join("&")},r.prototype.default_params=function(t){switch(t){case"identify":return{token:trak.io.api_token(),data:{distinct_id:trak.io.distinct_id(),properties:{}}};case"alias":return{token:trak.io.api_token(),data:{distinct_id:trak.io.distinct_id()}};case"track":return{token:trak.io.api_token(),data:{distinct_id:trak.io.distinct_id(),properties:{},channel:trak.io.channel(),context:trak.io.context()}};default:return{}}},r.prototype.callback=function(e,n){var r;if(!e||!e.status||"success"!==e.status)throw e.exception&&(r=t[e.exception])?new r(e.message,e.code,e.details,e):new t.Unknown(e.message,e.code,e.details,e);return n?n(e):void 0},r.prototype.noop=function(){},r.prototype.jsonp=function(t,e){var n,r,o,i,s,a,u;return a=1e4,s=document.getElementsByTagName("script")[0],r=this.count++,o=this,a&&(u=setTimeout(function(){return n(),o.callback({status:"error",exception:"TrakioAPI::Exceptions::Timeout",message:"The server failed to respond in time."})},a)),n=function(){return i.parentNode.removeChild(i),window["__trak"+r]=this.noop},o=this,window["__trak"+r]=function(t){return u&&clearTimeout(u),n(),o.callback(t,e)},t+=(~t.indexOf("?")?"&":"?")+"callback="+encodeURIComponent("__trak"+r),t=t.replace("?&","?"),i=document.createElement("script"),i.src=t,s.parentNode.insertBefore(i,s)},r}()}),define("io-query",["lodash"],function(t){var e={};return{objectToQuery:function(n){var r=encodeURIComponent,o=[];for(var i in n){var s=n[i];if(s!=e[i]){var a=r(i)+"=";if(t.isArray(s))for(var u=0,c=s.length;c>u;++u)o.push(a+r(s[u]));else o.push(a+r(s))}}return o.join("&")},queryToObject:function(e){for(var n,r,o,i=decodeURIComponent,s=e.split("&"),a={},u=0,c=s.length;c>u;++u)if(o=s[u],o.length){var p=o.indexOf("=");0>p?(n=i(o),r=""):(n=i(o.slice(0,p)),r=i(o.slice(p+1))),"string"==typeof a[n]&&(a[n]=[a[n]]),t.isArray(a[n])?a[n].push(r):a[n]=r}return a}}}),!function(t,e){var n=function(){return n.get.apply(n,arguments)},r=n.utils={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isPlainObject:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)},toArray:function(t){return Array.prototype.slice.call(t)},getKeys:Object.keys||function(t){var e=[],n="";for(n in t)t.hasOwnProperty(n)&&e.push(n);return e},escape:function(t){return String(t).replace(/[,;"\\=\s%]/g,function(t){return encodeURIComponent(t)})},retrieve:function(t,e){return null==t?e:t}};n.defaults={},n.expiresMultiplier=86400,n.set=function(n,o,i){if(r.isPlainObject(n))for(var s in n)n.hasOwnProperty(s)&&this.set(s,n[s],o);else{i=r.isPlainObject(i)?i:{expires:i};var a=i.expires!==e?i.expires:this.defaults.expires||"",u=typeof a;"string"===u&&""!==a?a=new Date(a):"number"===u&&(a=new Date(+new Date+1e3*this.expiresMultiplier*a)),""!==a&&"toGMTString"in a&&(a=";expires="+a.toGMTString());var c=i.path||this.defaults.path;c=c?";path="+c:"";var p=i.domain||this.defaults.domain;p=p?";domain="+p:"";var f=i.secure||this.defaults.secure?";secure":"";t.cookie=r.escape(n)+"="+r.escape(o)+a+c+p+f}return this},n.remove=function(t){t=r.isArray(t)?t:r.toArray(arguments);for(var e=0,n=t.length;n>e;e++)this.set(t[e],"",-1);return this},n.empty=function(){return this.remove(r.getKeys(this.all()))},n.get=function(t,n){n=n||e;var o=this.all();if(r.isArray(t)){for(var i={},s=0,a=t.length;a>s;s++){var u=t[s];i[u]=r.retrieve(o[u],n)}return i}return r.retrieve(o[t],n)},n.all=function(){if(""===t.cookie)return{};for(var e=t.cookie.split("; "),n={},r=0,o=e.length;o>r;r++){var i=e[r].split("=");n[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return n},n.enabled=function(){if(navigator.cookieEnabled)return!0;var t="_"===n.set("_","_").get("_");return n.remove("_"),t},"function"==typeof define&&define.amd?define("cookie",[],function(){return n}):"undefined"!=typeof exports?exports.cookie=n:window.cookie=n}(document);var __bind=function(t,e){return function(){return t.apply(e,arguments)}};return define("Trak",["jsonp","exceptions","io-query","cookie","lodash"],function(t,e,n,r,o){var i;return i=function(){function i(){this.context=__bind(this.context,this),this.default_context=__bind(this.default_context,this),this.current_context=__bind(this.current_context,this),this.host=__bind(this.host,this),this.protocol=__bind(this.protocol,this),this.page_view=__bind(this.page_view,this),this.track=__bind(this.track,this),this.alias=__bind(this.alias,this),this.identify=__bind(this.identify,this),this.call=__bind(this.call,this),this.on_page_ready=__bind(this.on_page_ready,this),this.page_ready=__bind(this.page_ready,this),this.loaded_automagic=__bind(this.loaded_automagic,this),this.load_automagic=__bind(this.load_automagic,this),this.initialise=__bind(this.initialise,this),this.initialize=__bind(this.initialize,this),this.io=this}return i.prototype.loaded=!0,i.prototype.Exceptions=e,i.prototype.cookie=r,i.prototype.minified=!0,i.instances=[],i.prototype.initialize=function(t,e){var n;return this._api_token=t,this.options=null!=e?e:{},this.protocol(this.options.protocol),this.options.host&&this.host(this.options.host),this.options.context&&this.context(this.options.context),this.options.channel&&this.channel(this.options.channel),"undefined"!=typeof this.options.alias_on_identify&&this.alias_on_identify(this.options.alias_on_identify),this.distinct_id(this.options.distinct_id||null),this.root_domain(this.options.root_domain||null),this.page_ready_event_fired=!1,this.options.automagic?this.automagic||this.load_automagic(this.options.automagic):this.automagic=!1,n=this,this.on_page_ready(this.page_ready),i.instances.push(this),this},i.prototype.initialise=function(){return this.initialize.apply(this,arguments)},i.prototype.load_automagic=function(t){var e,n,r,o,i;return this.automagic_options=t,o=document.createElement("script"),n=t.host||"d29p64779x43zo.cloudfront.net/v1",i=this.minified?"trak.io.automagic.min.js":"trak.io.automagic.js",o.src="//"+n+"/"+i,r=this,e=document.head||document.getElementsByTagName("head")[0],e.insertBefore(o,e.firstChild)},i.prototype.loaded_automagic=function(){return this.automagic=new i.Automagic,this.automagic_options&&this.automagic_options.test_hooks&&this.automagic_options.test_hooks[0]&&this.automagic_options.test_hooks[0](this.automagic),this.automagic.initialize(this.automagic_options),this.automagic_options&&this.automagic_options.test_hooks&&this.automagic_options.test_hooks[1]?this.automagic_options.test_hooks[1](this.automagic):void 0},i.prototype.page_ready=function(){return this.options.auto_track_page_views!==!1&&this.page_view(),this.automagic?this.automagic.page_ready():void 0},i.prototype.page_ready_event_fired=!1,i.prototype.on_page_ready=function(t){var e,n,r,o;if(r=this,n=function(){return r.page_ready_event_fired?void 0:(t(),r.page_ready_event_fired=!0)},e=function(){var t;if(!this.page_ready_event_fired){try{document.documentElement.doScroll("left")}catch(r){return t=r,void setTimeout(e,1)}return n()}},"complete"===document.readyState)return n();if(document.addEventListener)return document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);if(document.attachEvent){document.attachEvent("onreadystatechange",n),window.attachEvent("onload",n),o=!1;try{o=null==window.frameElement}catch(i){}if(document.documentElement.doScroll&&o)return e()}},i.prototype.jsonp=new t,i.prototype.call=function(){return this.jsonp.call.apply(this.jsonp,arguments)},i.prototype.identify=function(){var t,e,n,r,o,i,s,a,u;o=this,"number"==typeof arguments[0]&&(arguments[0]=arguments[0].toString()),t=this.sort_arguments(arguments,["string","object","function"]),n=t[0]||this.distinct_id(),i=t[1]||null,e=t[2]||null,this.should_track(!0),s=0;for(a in i)u=i[a],s++;return r=function(t){return i?o.call("identify",{data:{distinct_id:n,properties:i}},e):e?e(t):void 0},t[0]&&this.alias_on_identify()?o.alias(n,r):i&&s>0?r():e&&e({status:"unnecessary"}),this},i.prototype.alias=function(){var t,n,r,o,i;if("number"==typeof arguments[0]&&(arguments[0]=arguments[0].toString()),n=this.sort_arguments(arguments,["string","string","boolean","function"]),o=(n[1]?n[0]:void 0)||this.distinct_id(),t=n[1]?n[1]:n[0],i=null!==n[2]?n[2]:n[1]?!1:!0,r=n[3]||null,!t)throw new e.MissingParameter("Missing a required parameter.",400,"You must provide an alias, see http://docs.trak.io/alias.html");return t!==o?(this.call("alias",{data:{distinct_id:o,alias:t}},r),i&&this.distinct_id(t)):r&&r({status:"unnecessary"}),this},i.prototype.track=function(){var t,n,r,i,s,a,u;if(t=this.sort_arguments(arguments,["string","string","string","object","object","function"]),s=(t[2]?arguments[0]:void 0)||this.distinct_id(),a=t[2]?t[1]:t[0],r=(t[2]?t[2]:t[1])||this.channel(),u=t[3]||{},i=t[4]||{},i=o.merge(this.context(),i),n=t[5]||null,!a)throw new e.MissingParameter("Missing a required parameter.",400,"You must provide an event to track, see http://docs.trak.io/track.html");return this.should_track()&&this.call("track",{data:{distinct_id:s,event:a,channel:r,context:i,properties:u}},n),this},i.prototype.page_view=function(){var t,e,n,r;return t=this.sort_arguments(arguments,["string","string","function"]),r=t[0]||this.url(),n=t[1]||this.page_title(),e=t[2]||null,this.track("page_view",{url:r,page_title:n},e),this},i.prototype._protocol="https",i.prototype.protocol=function(t){return t&&(this._protocol=t),""+this._protocol+"://"
},i.prototype._host="api.trak.io/v1",i.prototype.host=function(t){return t&&(this._host=t),this._host},i.prototype._current_context=!1,i.prototype.current_context=function(t,e){var n;return this._current_context||(this._current_context=(n=this.get_cookie("context"))?JSON.parse(n):{}),"object"==typeof t?o.merge(this._current_context,t):t&&e&&(this._current_context[t]=e),this.set_cookie("context",JSON.stringify(this._current_context)),this._current_context},i.prototype.default_context=function(){var t,e;return e=this.url(),t=this.referer(),{ip:null,user_agent:navigator.userAgent,page_title:this.page_title(),url:e,params:e.indexOf("?")>0?n.queryToObject(e.substring(e.indexOf("?")+1,e.length)):{},referer:t,referer_params:t.indexOf("?")>0?n.queryToObject(t.substring(t.indexOf("?")+1,t.length)):{}}},i.prototype.context=function(t,e){var n;return n={},o.merge(n,this.default_context(),this.current_context(t,e)),n},i.prototype.url=function(){return window.location.href},i.prototype.referer=function(){return document.referrer},i.prototype.page_title=function(){return document.title},i.prototype.hostname=function(){return document.location.hostname},i.prototype.url_params=function(){return window.location.search},i.prototype.get_distinct_id_url_param=function(){var t;return(t=this.url_params().match(/\?.*trak_distinct_id\=([^&]+).*/))?decodeURIComponent(t[1]):void 0},i.prototype._channel=!1,i.prototype.channel=function(t){return this._channel||(this._channel=this.get_cookie("channel"))||(this._channel=this.hostname()||"web_site"),t&&(this._channel=t,this.set_cookie("channel",t)),this._channel},i.prototype._should_track=null,i.prototype.should_track=function(t){return null===this._should_track&&(this._should_track="true"===this.get_cookie("should_track")),"undefined"!=typeof t&&(this._should_track=t,this.set_cookie("should_track",t)),this._should_track},i.prototype._alias_on_identify=!0,i.prototype.alias_on_identify=function(t){return"undefined"!=typeof t&&(this._alias_on_identify=t),this._alias_on_identify},i.prototype._api_token=null,i.prototype.api_token=function(){return this._api_token},i.prototype._distinct_id=null,i.prototype.distinct_id=function(t){var e;return"number"==typeof t&&(t=t.toString()),t&&(this._distinct_id=t,this.should_track(!0)),this._distinct_id||(this._distinct_id=this.get_distinct_id_url_param())||(this._distinct_id=this.get_cookie("id"))||(this._distinct_id=this.generate_distinct_id()),e="localhost"===this.root_domain()?{}:{domain:this.root_domain()},r.set(this.cookie_key("id"),this._distinct_id,e),this._distinct_id},i.prototype.generate_distinct_id=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e,n;return e=16*Math.random()|0,n="x"===t?e:3&e|8,n.toString(16)})},i.prototype.sign_out=function(){return this.distinct_id(this.generate_distinct_id())},i.prototype._root_domain=null,i.prototype.root_domain=function(t){return t||this._root_domain||(this._root_domain=this.get_root_domain()),t&&(this._root_domain=t),this._root_domain},i.prototype.get_root_domain=function(){var t,e;if(this.hostname().match(/[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+$/i)||"localhost"===this.hostname())return this.hostname();for(e=this.hostname().split("."),t=e.pop();e.length>0&&!this.can_set_cookie({domain:t});)t=""+e.pop()+"."+t;return t},i.prototype.set_cookie=function(t,e){return r.set(this.cookie_key(t),e)},i.prototype.get_cookie=function(t){return r.get(this.cookie_key(t))},i.prototype.can_set_cookie=function(t){return r.set(this.cookie_key("foo"),""),r.set(this.cookie_key("foo"),"",t),r.set(this.cookie_key("foo"),"bar",t),"bar"===r.get(this.cookie_key("foo"))},i.prototype.cookie_key=function(t){return"_trak_"+this.api_token()+"_"+t},i.prototype.sort_arguments=function(t,e){var n,r,o,i,s;for(t=Array.prototype.slice.call(t),n=[],o=t.shift(),i=0,s=e.length;s>i;i++)r=e[i],r===typeof o?(n.push(o),o=t.shift()):n.push(null);return n},i.prototype.debug_error=function(t){return console&&console.error?console.error(t.stack?t.stack:t):void 0},i}()}),define("trak.io",["Trak","lodash","cookie"],function(t,e,n){var r,o,i,s;if(!window.trak||!window.trak.loaded){for(s=new t,i=window.trak,window.trak=s,window.Trak=window.trak.Trak=t;i&&i.length>0;)r=i.shift(),o=r.shift(),s.io[o]&&s.io[o].apply(s.io,r);n.defaults.expires=3650,n.defaults.path="/"}return window.trak}),require("trak.io")}();
